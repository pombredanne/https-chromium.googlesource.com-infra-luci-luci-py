!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/newres/",n(n.s=61)}([function(e,t,n){"use strict";n.d(t,"b",(function(){return o.a})),n.d(t,"a",(function(){return s.b})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p}));var s=n(4);const i=new class{handleAttributeExpressions(e,t,n,i){const r=t[0];return"."===r?new s.f(e,t.slice(1),n).parts:"@"===r?[new s.d(e,t.slice(1),i.eventContext)]:"?"===r?[new s.c(e,t.slice(1),n)]:new s.a(e,t,n).parts}handleTextExpression(e){return new s.e(e)}};var r=n(12),o=n(11),a=n(9),l=(n(5),n(2));function c(e){let t=h.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},h.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const s=e.strings.join(l.f);return void 0===(n=t.keyString.get(s))&&(n=new l.a(e,e.getTemplateElement()),t.keyString.set(s,n)),t.stringsArray.set(e.strings,n),n}const h=new Map,u=new WeakMap,d=(e,t,n)=>{let i=u.get(t);void 0===i&&(Object(a.b)(t,t.firstChild),u.set(t,i=new s.e(Object.assign({templateFactory:c},n))),i.appendInto(t)),i.setValue(e),i.commit()};n(16);(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");const p=(e,...t)=>new r.b(e,t,"html",i)},function(e,t,n){"use strict";function s(e,t){if(e.hasOwnProperty(t)){let n=e[t];delete e[t],e[t]=n}}n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return h}));const s=`{{lit-${String(Math.random()).slice(2)}}}`,i=`\x3c!--${s}--\x3e`,r=new RegExp(`${s}|${i}`),o="$lit$";class a{constructor(e,t){this.parts=[],this.element=t;let n=-1,i=0;const a=[],l=t=>{const u=t.content,d=document.createTreeWalker(u,133,null,!1);let p=0;for(;d.nextNode();){n++;const t=d.currentNode;if(1===t.nodeType){if(t.hasAttributes()){const a=t.attributes;let l=0;for(let e=0;e<a.length;e++)a[e].value.indexOf(s)>=0&&l++;for(;l-- >0;){const s=e.strings[i],a=h.exec(s)[2],l=a.toLowerCase()+o,c=t.getAttribute(l).split(r);this.parts.push({type:"attribute",index:n,name:a,strings:c}),t.removeAttribute(l),i+=c.length-1}}"TEMPLATE"===t.tagName&&l(t)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(s)>=0){const s=t.parentNode,o=e.split(r),l=o.length-1;for(let e=0;e<l;e++)s.insertBefore(""===o[e]?c():document.createTextNode(o[e]),t),this.parts.push({type:"node",index:++n});""===o[l]?(s.insertBefore(c(),t),a.push(t)):t.data=o[l],i+=l}}else if(8===t.nodeType)if(t.data===s){const e=t.parentNode;null!==t.previousSibling&&n!==p||(n++,e.insertBefore(c(),t)),p=n,this.parts.push({type:"node",index:n}),null===t.nextSibling?t.data="":(a.push(t),n--),i++}else{let e=-1;for(;-1!==(e=t.data.indexOf(s,e+1));)this.parts.push({type:"node",index:-1})}}};l(t);for(const e of a)e.parentNode.removeChild(e)}}const l=e=>-1!==e.index,c=()=>document.createComment(""),h=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/},,function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return _})),n.d(t,"d",(function(){return g}));var s=n(11),i=n(9),r=n(5),o=n(16),a=n(12),l=n(2);const c=e=>null===e||!("object"==typeof e||"function"==typeof e);class h{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new u(this)}_getValue(){const e=this.strings,t=e.length-1;let n="";for(let s=0;s<t;s++){n+=e[s];const t=this.parts[s];if(void 0!==t){const e=t.value;if(null!=e&&(Array.isArray(e)||"string"!=typeof e&&e[Symbol.iterator]))for(const t of e)n+="string"==typeof t?t:String(t);else n+="string"==typeof e?e:String(e)}}return n+e[t]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class u{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===r.a||c(e)&&e===this.value||(this.value=e,Object(s.b)(e)||(this.committer.dirty=!0))}commit(){for(;Object(s.b)(this.value);){const e=this.value;this.value=r.a,e(this)}this.value!==r.a&&this.committer.commit()}}class d{constructor(e){this.value=void 0,this._pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(Object(l.c)()),this.endNode=e.appendChild(Object(l.c)())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e._insert(this.startNode=Object(l.c)()),e._insert(this.endNode=Object(l.c)())}insertAfterPart(e){e._insert(this.startNode=Object(l.c)()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this._pendingValue=e}commit(){for(;Object(s.b)(this._pendingValue);){const e=this._pendingValue;this._pendingValue=r.a,e(this)}const e=this._pendingValue;e!==r.a&&(c(e)?e!==this.value&&this._commitText(e):e instanceof a.b?this._commitTemplateResult(e):e instanceof Node?this._commitNode(e):Array.isArray(e)||e[Symbol.iterator]?this._commitIterable(e):e===r.b?(this.value=r.b,this.clear()):this._commitText(e))}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_commitNode(e){this.value!==e&&(this.clear(),this._insert(e),this.value=e)}_commitText(e){const t=this.startNode.nextSibling;e=null==e?"":e,t===this.endNode.previousSibling&&3===t.nodeType?t.data=e:this._commitNode(document.createTextNode("string"==typeof e?e:String(e))),this.value=e}_commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof o.a&&this.value.template===t)this.value.update(e.values);else{const n=new o.a(t,e.processor,this.options),s=n._clone();n.update(e.values),this._commitNode(s),this.value=n}}_commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,s=0;for(const i of e)void 0===(n=t[s])&&(n=new d(this.options),t.push(n),0===s?n.appendIntoPart(this):n.insertAfterPart(t[s-1])),n.setValue(i),n.commit(),s++;s<t.length&&(t.length=s,this.clear(n&&n.endNode))}clear(e=this.startNode){Object(i.b)(this.startNode.parentNode,e.nextSibling,this.endNode)}}class p{constructor(e,t,n){if(this.value=void 0,this._pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this._pendingValue=e}commit(){for(;Object(s.b)(this._pendingValue);){const e=this._pendingValue;this._pendingValue=r.a,e(this)}if(this._pendingValue===r.a)return;const e=!!this._pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=e,this._pendingValue=r.a}}class _ extends h{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new f(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class f extends u{}let m=!1;try{const e={get capture(){return m=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}class g{constructor(e,t,n){this.value=void 0,this._pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this._boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this._pendingValue=e}commit(){for(;Object(s.b)(this._pendingValue);){const e=this._pendingValue;this._pendingValue=r.a,e(this)}if(this._pendingValue===r.a)return;const e=this._pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),i=null!=e&&(null==t||n);n&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),i&&(this._options=v(e),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=e,this._pendingValue=r.a}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const v=e=>e&&(m?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));const s={},i={}},,function(e,t,n){"use strict";function s(e){if(!e)return"";var t=[];return Object.keys(e).sort().forEach((function(n){e[n].forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}))})),t.join("&")}function i(e){var t=[];return Object.keys(e).sort().forEach((function(n){Array.isArray(e[n])?e[n].forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):"object"==typeof e[n]?t.push(encodeURIComponent(n)+"="+encodeURIComponent(i(e[n]))):t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))})),t.join("&")}function r(e,t){t=t||{};for(var n={},s=e.split("&"),i=0;i<s.length;i++){var o=s[i].split("=",2);if(2==o.length){var a=decodeURIComponent(o[0]),l=decodeURIComponent(o[1]);if(t.hasOwnProperty(a))switch(typeof t[a]){case"boolean":n[a]="true"==l;break;case"number":n[a]=Number(l);break;case"object":if(Array.isArray(t[a])){var c=n[a]||[];c.push(l),n[a]=c}else n[a]=r(l,t[a]);break;case"string":n[a]=l;break;default:n[a]=l}else n[a]=l}}return n}n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r}))},function(e,t,n){"use strict";function s(e,t=1e4){"object"==typeof e&&(e=e.message||JSON.stringify(e));var n={message:e,duration:t};document.dispatchEvent(new CustomEvent("error-sk",{detail:n,bubbles:!0}))}n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r}));const s=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(e,t,n=null,s=null)=>{let i=t;for(;i!==n;){const t=i.nextSibling;e.insertBefore(i,s),i=t}},r=(e,t,n=null)=>{let s=t;for(;s!==n;){const t=s.nextSibling;e.removeChild(s),s=t}}},function(e,t,n){"use strict";function s(e){if(e.ok)return e.json();throw{message:`Bad network response: ${e.statusText}`,resp:e,status:e.status}}n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const s=new WeakMap,i=e=>(...t)=>{const n=e(...t);return s.set(n,!0),n},r=e=>"function"==typeof e&&s.has(e)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var s=n(9),i=n(2);class r{constructor(e,t,n,s){this.strings=e,this.values=t,this.type=n,this.processor=s}getHTML(){const e=this.strings.length-1;let t="";for(let n=0;n<e;n++){const e=this.strings[n],s=i.e.exec(e);t+=s?e.substr(0,s.index)+s[1]+s[2]+i.b+s[3]+i.f:e+i.g}return t+this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}class o extends r{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const e=super.getTemplateElement(),t=e.content,n=t.firstChild;return t.removeChild(n),Object(s.c)(t,n.firstChild),e}}},,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(9),i=n(2);class r{constructor(e,t,n){this._parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this._parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this._parts)void 0!==e&&e.commit()}_clone(){const e=s.a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=this.template.parts;let n=0,r=0;const o=e=>{const s=document.createTreeWalker(e,133,null,!1);let a=s.nextNode();for(;n<t.length&&null!==a;){const e=t[n];if(Object(i.d)(e))if(r===e.index){if("node"===e.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(a.previousSibling),this._parts.push(e)}else this._parts.push(...this.processor.handleAttributeExpressions(a,e.name,e.strings,this.options));n++}else r++,"TEMPLATE"===a.nodeName&&o(a.content),a=s.nextNode();else this._parts.push(void 0),n++}};return o(e),s.a&&(document.adoptNode(e),customElements.upgrade(e)),e}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n(0);const i=Object(s.b)(e=>t=>{if(void 0===e&&t instanceof s.a){if(e!==t.value){const e=t.committer.name;t.committer.element.removeAttribute(e)}}else t.setValue(e)})},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(8),i=n(0),r=n(1);class o extends HTMLElement{constructor(e){super(),this._template=e,this._app=null,this._auth_header="",this._profile=null,this._notAuthorized=!1}connectedCallback(){Object(r.a)(this,"client_id"),Object(r.a)(this,"testing_offline"),this._authHeaderEvent=e=>{this._auth_header=e.detail.auth_header},this.addEventListener("log-in",this._authHeaderEvent)}disconnectedCallback(){this.removeEventListener("log-in",this._authHeaderEvent)}static get observedAttributes(){return["client_id","testing_offline"]}get app(){return this._app}get auth_header(){return this._auth_header}get loggedInAndAuthorized(){return!!this._auth_header&&!this._notAuthorized}get permissions(){return this._app&&this._app.permissions||{}}get profile(){return this._app&&this._app.profile||{}}get server_details(){return this._app&&this._app.server_details||{}}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.hasAttribute("testing_offline")}set testing_offline(e){e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}fetchError(e,t,n){403!==e.status||n?"AbortError"!==e.name&&(console.error(e),Object(s.a)(`Unexpected error loading ${t}: ${e.message}`,5e3)):(this._message="User unauthorized - try logging in with a different account",this._notAuthorized=!0,this.render()),this._app.finishedTask()}render(){Object(i.d)(this._template(this),this,{eventContext:this}),this._app||(this._app=this.firstElementChild,Object(i.d)(this._template(this),this,{eventContext:this}))}attributeChangedCallback(e,t,n){this.render()}}},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var s=n(1);window.customElements.define("toast-sk",class extends HTMLElement{constructor(){super(),this._timer=null}connectedCallback(){this.hasAttribute("duration")||(this.duration=5e3),Object(s.a)(this,"duration")}get duration(){return+this.getAttribute("duration")}set duration(e){this.setAttribute("duration",e)}show(){this.setAttribute("shown",""),this.duration>0&&!this._timer&&(this._timer=window.setTimeout(()=>{this._timer=null,this.hide()},this.duration))}hide(){this.removeAttribute("shown"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)}});n(25);window.customElements.define("error-toast-sk",class extends HTMLElement{connectedCallback(){this.innerHTML="<toast-sk></toast-sk>",this._toast=this.firstElementChild,document.addEventListener("error-sk",this)}disconnectedCallback(){document.removeEventListener("error-sk",this)}handleEvent(e){e.detail.duration&&(this._toast.duration=e.detail.duration),this._toast.textContent=e.detail.message,this._toast.show()}});n(14);const i=document.createElement("template");i.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"/></svg>',window.customElements.define("bug-report-icon-sk",class extends HTMLElement{connectedCallback(){let e=i.content.cloneNode(!0);this.appendChild(e)}});const r=document.createElement("template");r.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',window.customElements.define("menu-icon-sk",class extends HTMLElement{connectedCallback(){let e=r.content.cloneNode(!0);this.appendChild(e)}}),window.customElements.define("spinner-sk",class extends HTMLElement{connectedCallback(){Object(s.a)(this,"active")}get active(){return this.hasAttribute("active")}set active(e){e?this.setAttribute("active",""):this.removeAttribute("active")}});n(26),n(27);var o=n(0),a=n(8);const l=new Promise((e,t)=>{const n=()=>{void 0!==window.gapi?e():setTimeout(n,10)};setTimeout(n,10)});window.customElements.define("oauth-login",class extends HTMLElement{connectedCallback(){Object(s.a)(this,"client_id"),Object(s.a)(this,"testing_offline"),this._auth_header="",this.testing_offline?this._profile={email:"missing@chromium.org",imageURL:"http://storage.googleapis.com/gd-wagtail-prod-assets/original_images/logo_google_fonts_color_2x_web_64dp.png"}:(this._profile=null,l.then(()=>{gapi.load("auth2",()=>{gapi.auth2.init({client_id:this.client_id}).then(()=>{this._maybeFireLoginEvent(),this.render()},e=>{console.error(e),Object(a.a)(`Error initializing oauth: ${JSON.stringify(e)}`,1e4)})})})),this.render()}static get observedAttributes(){return["client_id","testing_offline"]}get auth_header(){return this._auth_header}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get profile(){return this._profile}get testing_offline(){return this.hasAttribute("testing_offline")}set testing_offline(e){e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}_maybeFireLoginEvent(){const e=gapi.auth2.getAuthInstance().currentUser.get();if(e.isSignedIn()){const t=e.getBasicProfile();this._profile={email:t.getEmail(),imageURL:t.getImageUrl()};const n=e.getAuthResponse(!0),s=`${n.token_type} ${n.access_token}`;return this.dispatchEvent(new CustomEvent("log-in",{detail:{auth_header:s,profile:this._profile},bubbles:!0})),this._auth_header=s,!0}return this._profile=null,this._auth_header="",!1}_logIn(){if(this.testing_offline)this._auth_header="Bearer 12345678910-boomshakalaka",this.dispatchEvent(new CustomEvent("log-in",{detail:{auth_header:this._auth_header,profile:this._profile},bubbles:!0})),this.render();else{const e=gapi.auth2.getAuthInstance();e&&e.signIn({scope:"email",prompt:"select_account"}).then(()=>{this._maybeFireLoginEvent()||console.warn("login was not successful; maybe user canceled"),this.render()})}}_logOut(){if(this.testing_offline)this._auth_header="",this.render(),window.location.reload();else{const e=gapi.auth2.getAuthInstance();e&&e.signOut().then(()=>{this._auth_header="",this._profile=null,window.location.reload()})}}render(){var e;Object(o.d)((e=this).auth_header?o.c` <div> <img class=center id=avatar src="${e._profile.imageURL}" width=30 height=30> <span class=center>${e._profile.email}</span> <span class=center>|</span> <a class=center @click=${e._logOut} href="#">Sign out</a> </div>`:o.c` <div> <a @click=${e._logIn} href="#">Sign in</a> </div>`,this,{eventContext:this})}attributeChangedCallback(e,t,n){this.render()}});var c=n(10),h=n(7);n(18);const u=document.createElement("template");u.innerHTML="\n<button class=toggle-button>\n  <menu-icon-sk>\n  </menu-icon-sk>\n</button>\n";const d=document.createElement("template");d.innerHTML="\n<div class=spinner-spacer>\n  <spinner-sk></spinner-sk>\n</div>\n";const p=e=>o.c` <div class=server-version> AppEngine version: ${function(e,t){return t&&t.server_version?o.c`<a href=${"https://console.cloud.google.com/appengine/versions?project=".concat(e,"&serviceId=default&pageState=(%22versionsTable%22:(%22f%22:%22%255B%257B_22k_22_3A_22Version_22_2C_22t_22_3A10_2C_22v_22_3A_22_5C_22",t.server_version,"_5C_22_22_2C_22s_22_3Atrue_2C_22i_22_3A_22id_22%257D%255D%22))")}> ${t.server_version}</a>`:"You must log in to see more details"}(e._project_id,e._server_details)} Git version:${function(e){if(!e||!e.server_version)return"";const t=e.server_version.split("-");if(t.length>=3)return console.error(`Invalid Git version. version=${e.server_version}`),"";const n=2==t.length?t[1]:t[0];return o.c`<a href=https://chromium.googlesource.com/infra/luci/luci-py/+/${n}>${n}</a>`}(e._server_details)} </div> <oauth-login client_id=${e.client_id} ?testing_offline=${e.testing_offline}> </oauth-login>`,_=document.createElement("template");_.innerHTML='\n<a target=_blank rel=noopener\n   href="https://bugs.chromium.org/p/chromium/issues/entry?components=Infra%3EPlatform%3ESwarming%3EWebUI&owner=kjlubick@chromium.org&status=Assigned">\n  <bug-report-icon-sk class=fab></bug-report-icon-sk>\n</a>',window.customElements.define("swarming-app",class extends HTMLElement{constructor(){super(),this._busyTaskCount=0,this._spinner=null,this._dynamicEle=null,this._auth_header="",this._profile={},this._server_details={server_version:"You must log in to see more details",bot_version:"",cas_viewer_server:""},this._permissions={}}connectedCallback(){Object(s.a)(this,"client_id"),Object(s.a)(this,"testing_offline"),this._addHTML(),this.addEventListener("log-in",e=>{this._auth_header=e.detail.auth_header,this._profile=e.detail.profile,this._fetch()}),this.render()}static get observedAttributes(){return["client_id","testing_offline"]}get busy(){return!!this._busyTaskCount}get permissions(){return this._permissions}get profile(){return this._profile}get server_details(){return this._server_details}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.hasAttribute("testing_offline")}set testing_offline(e){e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}addBusyTasks(e){this._busyTaskCount+=e,this._spinner&&this._busyTaskCount>0&&(this._spinner.active=!0)}finishedTask(){this._busyTaskCount--,this._busyTaskCount<=0&&(this._busyTaskCount=0,this._spinner&&(this._spinner.active=!1),this.dispatchEvent(new CustomEvent("busy-end",{bubbles:!0})))}_addHTML(){const e=this.querySelector("header"),t=e&&e.querySelector("aside"),n=this.querySelector("footer");if(!(e&&t&&t.classList.contains("hideable")))return;let s=u.content.cloneNode(!0);e.insertBefore(s,e.firstElementChild),(s=e.firstElementChild).addEventListener("click",e=>this._toggleMenu(e,t));const i=d.content.cloneNode(!0);e.insertBefore(i,t),this._spinner=e.querySelector("spinner-sk");const r=document.createElement("span");r.classList.add("grow"),e.appendChild(r),this._dynamicEle=document.createElement("div"),this._dynamicEle.classList.add("right"),e.appendChild(this._dynamicEle);const o=document.createElement("error-toast-sk");n.append(o);const a=_.content.cloneNode(!0);n.append(a)}_toggleMenu(e,t){t.classList.toggle("shown")}_fetch(){if(!this._auth_header)return;this._server_details={server_version:"<loading>",bot_version:"<loading>"};const e={headers:{authorization:this._auth_header}};this.addBusyTasks(1),fetch("/_ah/api/swarming/v1/server/details",e).then(c.a).then(e=>{this._server_details=e,this.render(),this.dispatchEvent(new CustomEvent("server-details-loaded",{bubbles:!0})),this.finishedTask()}).catch(e=>{403===e.status?(this._server_details={server_version:"User unauthorized - try logging in with a different account",bot_version:""},this.render()):(console.error(e),Object(a.a)(`Unexpected error loading details: ${e.message}`,5e3)),this.finishedTask()}),this._fetchPermissions(e)}_fetchPermissions(e,t){this.addBusyTasks(1);let n="/_ah/api/swarming/v1/server/permissions";return t&&(n+=`?${h.a(t)}`),fetch(n,e).then(c.a).then(e=>{this._permissions=e,this.render(),this.dispatchEvent(new CustomEvent("permissions-loaded",{bubbles:!0})),this.finishedTask()}).catch(e=>{403!==e.status&&(console.error(e),Object(a.a)(`Unexpected error loading permissions: ${e.message}`,5e3)),this.finishedTask()})}render(){this._dynamicEle&&Object(o.d)(p(this),this._dynamicEle)}attributeChangedCallback(e,t,n){this.render()}});n(28)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";n.r(t);var s=n(0),i=(n(1),n(10)),r=(n(8),n(21));n(29);const o=e=>s.c` <swarming-app id=swapp client_id="${e.client_id}" ?testing_offline="${e.testing_offline}"> <header> <div class=title>Swarming</div> <aside class=hideable> <a href=/>Home</a> <a href=/botlist>Bot List</a> <a href=/tasklist>Task List</a> <a href=/bot>Bot Page</a> <a href=/task>Task Page</a> </aside> </header> <main> <h2>Service Status</h2> <div>Server Version: <span class=server_version> ${e.server_details.server_version}</span> </div> <div>Bot Version: ${e.server_details.bot_version} </div> <ul> <li> <a href=${(e=>"https://console.cloud.google.com/appengine/instances?"+`project=${e._project_id}&versionId=${e.server_details.server_version}`)(e)}>View version's instances on Cloud Console</a> </li> <li> <a href=${(e=>`https://console.cloud.google.com/errors?project=${e}`)(e._project_id)}>View server errors on Cloud Console</a> </li> <li> <a href=${(e=>`https://console.cloud.google.com/logs/viewer?filters=status:500..599&project=${e}`)(e._project_id)}>View logs for HTTP 5xx on Cloud Console</a> </li> <li> <a href="/restricted/ereporter2/report">View ereporter2 report</a> </li> </ul> <h2>Configuration</h2> <ul>  <li> <a href="/restricted/config">View server config</a> </li> <li> <a href="/restricted/upload/bootstrap">View/upload bootstrap.py</a> </li> <li> <a href="/restricted/upload/bot_config">View/upload bot_config.py</a> </li> <li> <a href="/auth/groups">View/edit user groups</a> </li> </ul> ${e.permissions.get_bootstrap_token?(e=>s.c` <div> <h2>Bootstrapping a bot</h2> <div>To bootstrap a bot, run one of these (all links are valid for 1 hour):</div> <ol> <li> <strong> TL;DR; </strong> <pre class=command>python3 -c "import urllib.request; exec(urllib.request.urlopen('${e._host_url}/bootstrap?tok=${e._bootstrap_token}').read())"</pre> </li> <li> Escaped version to pass as a ssh argument: <pre class=command>'python3 -c "import urllib.request; exec(urllib.request.urlopen('"'${e._host_url}/bootstrap?tok=${e._bootstrap_token}'"').read())"'</pre> </li> <li> Manually: <pre class=command>mkdir bot; cd bot
rm -f swarming_bot.zip; curl -sSLOJ ${e._host_url}/bot_code?tok=${e._bootstrap_token}
python3 swarming_bot.zip</pre> </li> </ol> <div>Windows bot requires pywin32, Mac bot requires pyobjc</div> </div> `)(e):""} </main> <footer></footer> </swarming-app>`;window.customElements.define("swarming-index",class extends r.a{constructor(){super(o),this._bootstrap_token="...";const e=location.hostname.indexOf(".appspot.com");this._project_id=location.hostname.substring(0,e)||"not_found",this._host_url=location.origin}connectedCallback(){super.connectedCallback(),this.addEventListener("permissions-loaded",e=>{this.permissions.get_bootstrap_token&&this._fetchToken(),this.render()}),this.addEventListener("server-details-loaded",e=>{this.render()}),this.render()}_fetchToken(){const e={headers:{authorization:this.auth_header},method:"POST"};this.app.addBusyTasks(1),fetch("/_ah/api/swarming/v1/server/token",e).then(i.a).then(e=>{this._bootstrap_token=e.bootstrap_token,this.render(),this.app.finishedTask()}).catch(e=>this.fetchError(e,"token"))}});n(52)}]);