(()=>{var e={445:function(e,t){"use strict";var s=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcCode=Object.freeze({OK:0,CANCELED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16});const i={};for(const e in t.RpcCode)i[t.RpcCode[e]]=e;function n(e){return i[e]}t.rpcCodeToCodeName=n,t.PrpcClient=class{constructor(e=null){e=e||{},this.host=e.host||document.location.host,this.accessToken=e.accessToken||null,this.insecure=e.hasOwnProperty("insecure")&&Boolean(e.insecure),this.fetchImpl=e.fetchImpl||window.fetch.bind(window)}call(e,i,n,a){return s(this,void 0,void 0,(function*(){if(!e)throw new TypeError("missing required argument: service");if(!i)throw new TypeError("missing required argument: method");if(!n)throw new TypeError("missing required argument: message");if(!(n instanceof Object))throw new TypeError("argument `message` must be a protobuf object");const s=`${!0===this.insecure?"http:":"https:"}//${this.host}/prpc/${e}/${i}`,l=this._requestOptions(n,a),c=yield this.fetchImpl(s,l);if(!c.headers.has("X-Prpc-Grpc-Code"))throw new o(c.status,"Invalid response: no X-Prpc-Grpc-Code response header");const h=Number.parseInt(c.headers.get("X-Prpc-Grpc-Code"),10);if(Number.isNaN(h))throw new o(c.status,"Invalid X-Prpc-Grpc-Code response header");const d=yield c.text();if(h!==t.RpcCode.OK)throw new r(h,d);if(!d.startsWith(")]}'"))throw new o(c.status,"Response body does not start with XSSI prefix: )]}'");return JSON.parse(d.substr(")]}'".length))}))}_requestOptions(e,t){const s={accept:"application/json","content-type":"application/json"};return t&&Object.assign(s,t),this.accessToken&&(s.authorization=`Bearer ${this.accessToken}`),{credentials:"omit",method:"POST",headers:s,body:JSON.stringify(e)}}};class r extends Error{constructor(e,t){if(super(),this.code=e,this.description=t,null===e)throw new Error("missing required argument: code");this.codeName=n(e)}get message(){return`code: ${this.code} (${this.codeName}) desc: ${this.description}`}}t.GrpcError=r;class o extends Error{constructor(e,t){if(super(),this.httpStatus=e,this.description=t,null===e)throw new Error("missing required argument: httpStatus")}get message(){return`status: ${this.httpStatus} desc: ${this.description}`}}t.ProtocolError=o},28:e=>{e.exports=function e(t,s){"use strict";var i,n,r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,h=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},d=h(t).replace(o,"")||"",u=h(s).replace(o,"")||"",p=d.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=u.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=parseInt(d.match(l),16)||1!==p.length&&d.match(a)&&Date.parse(d),f=parseInt(u.match(l),16)||_&&u.match(a)&&Date.parse(u)||null;if(f){if(_<f)return-1;if(_>f)return 1}for(var g=0,v=Math.max(p.length,m.length);g<v;g++){if(i=!(p[g]||"").match(c)&&parseFloat(p[g])||p[g]||0,n=!(m[g]||"").match(c)&&parseFloat(m[g])||m[g]||0,isNaN(i)!==isNaN(n))return isNaN(i)?1:-1;if(typeof i!=typeof n&&(i+="",n+=""),i<n)return-1;if(i>n)return 1}return 0}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=new Promise((function(e,t){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)})),t=(e,t=document)=>t.querySelector(e);function i(e,t=1e4){"object"==typeof e&&(e=e.message||JSON.stringify(e));var s={message:e,duration:t};document.dispatchEvent(new CustomEvent("error-sk",{detail:s,bubbles:!0}))}const n=new WeakMap,r=e=>(...t)=>{const s=e(...t);return n.set(s,!0),s},o=e=>"function"==typeof e&&n.has(e),a=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,l=(e,t,s=null)=>{let i=t;for(;i!==s;){const t=i.nextSibling;e.removeChild(i),i=t}},c={},h={},d=`{{lit-${String(Math.random()).slice(2)}}}`,u=`\x3c!--${d}--\x3e`,p=new RegExp(`${d}|${u}`),m="$lit$";class _{constructor(e,t){this.parts=[],this.element=t;let s=-1,i=0;const n=[],r=t=>{const o=t.content,a=document.createTreeWalker(o,133,null,!1);let l=0;for(;a.nextNode();){s++;const t=a.currentNode;if(1===t.nodeType){if(t.hasAttributes()){const n=t.attributes;let r=0;for(let e=0;e<n.length;e++)n[e].value.indexOf(d)>=0&&r++;for(;r-- >0;){const n=e.strings[i],r=v.exec(n)[2],o=r.toLowerCase()+m,a=t.getAttribute(o).split(p);this.parts.push({type:"attribute",index:s,name:r,strings:a}),t.removeAttribute(o),i+=a.length-1}}"TEMPLATE"===t.tagName&&r(t)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(d)>=0){const r=t.parentNode,o=e.split(p),a=o.length-1;for(let e=0;e<a;e++)r.insertBefore(""===o[e]?g():document.createTextNode(o[e]),t),this.parts.push({type:"node",index:++s});""===o[a]?(r.insertBefore(g(),t),n.push(t)):t.data=o[a],i+=a}}else if(8===t.nodeType)if(t.data===d){const e=t.parentNode;null!==t.previousSibling&&s!==l||(s++,e.insertBefore(g(),t)),l=s,this.parts.push({type:"node",index:s}),null===t.nextSibling?t.data="":(n.push(t),s--),i++}else{let e=-1;for(;-1!==(e=t.data.indexOf(d,e+1));)this.parts.push({type:"node",index:-1})}}};r(t);for(const e of n)e.parentNode.removeChild(e)}}const f=e=>-1!==e.index,g=()=>document.createComment(""),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class b{constructor(e,t,s){this._parts=[],this.template=e,this.processor=t,this.options=s}update(e){let t=0;for(const s of this._parts)void 0!==s&&s.setValue(e[t]),t++;for(const e of this._parts)void 0!==e&&e.commit()}_clone(){const e=a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=this.template.parts;let s=0,i=0;const n=e=>{const r=document.createTreeWalker(e,133,null,!1);let o=r.nextNode();for(;s<t.length&&null!==o;){const e=t[s];if(f(e))if(i===e.index){if("node"===e.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(o.previousSibling),this._parts.push(e)}else this._parts.push(...this.processor.handleAttributeExpressions(o,e.name,e.strings,this.options));s++}else i++,"TEMPLATE"===o.nodeName&&n(o.content),o=r.nextNode();else this._parts.push(void 0),s++}};return n(e),a&&(document.adoptNode(e),customElements.upgrade(e)),e}}class y{constructor(e,t,s,i){this.strings=e,this.values=t,this.type=s,this.processor=i}getHTML(){const e=this.strings.length-1;let t="";for(let s=0;s<e;s++){const e=this.strings[s],i=v.exec(e);t+=i?e.substr(0,i.index)+i[1]+i[2]+m+i[3]+d:e+u}return t+this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const w=e=>null===e||!("object"==typeof e||"function"==typeof e);class k{constructor(e,t,s){this.dirty=!0,this.element=e,this.name=t,this.strings=s,this.parts=[];for(let e=0;e<s.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new E(this)}_getValue(){const e=this.strings,t=e.length-1;let s="";for(let i=0;i<t;i++){s+=e[i];const t=this.parts[i];if(void 0!==t){const e=t.value;if(null!=e&&(Array.isArray(e)||"string"!=typeof e&&e[Symbol.iterator]))for(const t of e)s+="string"==typeof t?t:String(t);else s+="string"==typeof e?e:String(e)}}return s+e[t]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class E{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===c||w(e)&&e===this.value||(this.value=e,o(e)||(this.committer.dirty=!0))}commit(){for(;o(this.value);){const e=this.value;this.value=c,e(this)}this.value!==c&&this.committer.commit()}}class C{constructor(e){this.value=void 0,this._pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(g()),this.endNode=e.appendChild(g())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e._insert(this.startNode=g()),e._insert(this.endNode=g())}insertAfterPart(e){e._insert(this.startNode=g()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this._pendingValue=e}commit(){for(;o(this._pendingValue);){const e=this._pendingValue;this._pendingValue=c,e(this)}const e=this._pendingValue;e!==c&&(w(e)?e!==this.value&&this._commitText(e):e instanceof y?this._commitTemplateResult(e):e instanceof Node?this._commitNode(e):Array.isArray(e)||e[Symbol.iterator]?this._commitIterable(e):e===h?(this.value=h,this.clear()):this._commitText(e))}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_commitNode(e){this.value!==e&&(this.clear(),this._insert(e),this.value=e)}_commitText(e){const t=this.startNode.nextSibling;e=null==e?"":e,t===this.endNode.previousSibling&&3===t.nodeType?t.data=e:this._commitNode(document.createTextNode("string"==typeof e?e:String(e))),this.value=e}_commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof b&&this.value.template===t)this.value.update(e.values);else{const s=new b(t,e.processor,this.options),i=s._clone();s.update(e.values),this._commitNode(i),this.value=s}}_commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let s,i=0;for(const n of e)void 0===(s=t[i])&&(s=new C(this.options),t.push(s),0===i?s.appendIntoPart(this):s.insertAfterPart(t[i-1])),s.setValue(n),s.commit(),i++;i<t.length&&(t.length=i,this.clear(s&&s.endNode))}clear(e=this.startNode){l(this.startNode.parentNode,e.nextSibling,this.endNode)}}class x{constructor(e,t,s){if(this.value=void 0,this._pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=s}setValue(e){this._pendingValue=e}commit(){for(;o(this._pendingValue);){const e=this._pendingValue;this._pendingValue=c,e(this)}if(this._pendingValue===c)return;const e=!!this._pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=e,this._pendingValue=c}}class A extends k{constructor(e,t,s){super(e,t,s),this.single=2===s.length&&""===s[0]&&""===s[1]}_createPart(){return new N(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class N extends E{}let T=!1;try{const e={get capture(){return T=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}class I{constructor(e,t,s){this.value=void 0,this._pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=s,this._boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this._pendingValue=e}commit(){for(;o(this._pendingValue);){const e=this._pendingValue;this._pendingValue=c,e(this)}if(this._pendingValue===c)return;const e=this._pendingValue,t=this.value,s=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),i=null!=e&&(null==t||s);s&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),i&&(this._options=$(e),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=e,this._pendingValue=c}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const $=e=>e&&(T?{capture:e.capture,passive:e.passive,once:e.once}:e.capture),S=new class{handleAttributeExpressions(e,t,s,i){const n=t[0];return"."===n?new A(e,t.slice(1),s).parts:"@"===n?[new I(e,t.slice(1),i.eventContext)]:"?"===n?[new x(e,t.slice(1),s)]:new k(e,t,s).parts}handleTextExpression(e){return new C(e)}};function D(e){let t=L.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},L.set(e.type,t));let s=t.stringsArray.get(e.strings);if(void 0!==s)return s;const i=e.strings.join(d);return void 0===(s=t.keyString.get(i))&&(s=new _(e,e.getTemplateElement()),t.keyString.set(i,s)),t.stringsArray.set(e.strings,s),s}const L=new Map,M=new WeakMap,P=(e,t,s)=>{let i=M.get(t);void 0===i&&(l(t,t.firstChild),M.set(t,i=new C(Object.assign({templateFactory:D},s))),i.appendInto(t)),i.setValue(e),i.commit()};(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");const H=(e,...t)=>new y(e,t,"html",S),O=r((e=>t=>{if(void 0===e&&t instanceof E){if(e!==t.value){const e=t.committer.name;t.committer.element.removeAttribute(e)}}else t.setValue(e)}));var U=s(28),V=s.n(U);function B(e){if(!e)return"";var t=[];return Object.keys(e).sort().forEach((function(s){e[s].forEach((function(e){t.push(encodeURIComponent(s)+"="+encodeURIComponent(e))}))})),t.join("&")}function G(e){var t=[];return Object.keys(e).sort().forEach((function(s){Array.isArray(e[s])?e[s].forEach((function(e){t.push(encodeURIComponent(s)+"="+encodeURIComponent(e))})):"object"==typeof e[s]?t.push(encodeURIComponent(s)+"="+encodeURIComponent(G(e[s]))):t.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]))})),t.join("&")}function R(e,t){t=t||{};for(var s={},i=e.split("&"),n=0;n<i.length;n++){var r=i[n].split("=",2);if(2==r.length){var o=decodeURIComponent(r[0]),a=decodeURIComponent(r[1]);if(t.hasOwnProperty(o))switch(typeof t[o]){case"boolean":s[o]="true"==a;break;case"number":s[o]=Number(a);break;case"object":if(Array.isArray(t[o])){var l=s[o]||[];l.push(a),s[o]=l}else s[o]=R(a,t[o]);break;default:s[o]=a}else s[o]=a}}return s}const K=e=>JSON.parse(JSON.stringify(e));function W(t,s){let i=K(t()),n=!1;const r=()=>{n=!0;let e=R(window.location.search.slice(1),i);s(function(e,t){let s={};return Object.keys(t).forEach((function(i){e.hasOwnProperty(i)?s[i]=K(e[i]):s[i]=K(t[i])})),s}(e,i))};return e.then(r),window.addEventListener("popstate",r),()=>{if(!n)return;let e=G(function(e,t){let s={};return Object.keys(e).forEach((function(i){(function(e,t){if(typeof e!=typeof t)return!1;let s=typeof e;return"string"===s||"boolean"===s||"number"===s?e===t:"object"===s?Array.isArray(s)?JSON.stringify(e)===JSON.stringify(t):G(e)===G(t):void 0})(e[i],t[i])||(s[i]=e[i])})),s}(t(),i));history.pushState(null,"",window.location.origin+window.location.pathname+"?"+e)}}function z(e,t){if(e.hasOwnProperty(t)){let s=e[t];delete e[t],e[t]=s}}class F extends HTMLElement{get _role(){return"checkbox"}static get observedAttributes(){return["checked","disabled","name","label"]}connectedCallback(){this.innerHTML=`<label><input type=${this._role}></input><span class=box></span><span class=label></span></label>`,this._label=this.querySelector(".label"),this._input=this.querySelector("input"),z(this,"checked"),z(this,"disabled"),z(this,"name"),z(this,"label"),this._input.checked=this.checked,this._input.disabled=this.disabled,this._input.setAttribute("name",this.getAttribute("name")),this._label.textContent=this.getAttribute("label")}get checked(){return this.hasAttribute("checked")}set checked(e){let t=!!e;this._input.checked=t,e?this.setAttribute("checked",""):this.removeAttribute("checked")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){let t=!!e;this._input.disabled=t,t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get name(){return this._input.getAttribute("name")}set name(e){this.setAttribute("name",e),this._input.setAttribute("name",e)}get label(){return this._input.getAttribute("label")}set label(e){this.setAttribute("label",e),this._input.setAttribute("label",e)}attributeChangedCallback(e,t,s){if(!this._input)return;let i=null!=s;switch(e){case"checked":this._input.checked=i;break;case"disabled":this._input.disabled=i;break;case"name":this._input.name=s;break;case"label":this._label.textContent=s}}}window.customElements.define("checkbox-sk",F);const q=document.createElement("template");q.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>',window.customElements.define("add-circle-icon-sk",class extends HTMLElement{connectedCallback(){let e=q.content.cloneNode(!0);this.appendChild(e)}});const j=document.createElement("template");j.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>',window.customElements.define("cancel-icon-sk",class extends HTMLElement{connectedCallback(){let e=j.content.cloneNode(!0);this.appendChild(e)}});const X=document.createElement("template");X.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>',window.customElements.define("more-vert-icon-sk",class extends HTMLElement{connectedCallback(){let e=X.content.cloneNode(!0);this.appendChild(e)}});const Q=document.createElement("template");Q.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',window.customElements.define("search-icon-sk",class extends HTMLElement{connectedCallback(){let e=Q.content.cloneNode(!0);this.appendChild(e)}}),window.customElements.define("select-sk",class extends HTMLElement{constructor(){super(),this._obs=new MutationObserver((()=>this._bubbleUp())),this._selection=-1}connectedCallback(){z(this,"selection"),z(this,"disabled"),this.addEventListener("click",this._click),this._obs.observe(this,{childList:!0}),this._bubbleUp()}disconnectedCallback(){this.removeEventListener("click",this._click),this._obs.disconnect()}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?(this.setAttribute("disabled",""),this.selection=-1):(this.removeAttribute("disabled"),this._bubbleUp())}get selection(){return this._selection}set selection(e){this.disabled||(null!=e||(e=-1),this._selection=+e,this._rationalize())}_click(e){if(this.disabled)return;let t=this._selection,s=e.target;for(;s&&s.parentElement!==this;)s=s.parentElement;if(s&&s.parentElement===this)for(let e=0;e<this.children.length;e++)if(this.children[e]===s){this._selection=e;break}this._rationalize(),t!=this._selection&&this.dispatchEvent(new CustomEvent("selection-changed",{detail:{selection:this._selection},bubbles:!0}))}_rationalize(){for(let e=0;e<this.children.length;e++)this._selection===e?this.children[e].setAttribute("selected",""):this.children[e].removeAttribute("selected")}_bubbleUp(){if(this._selection=-1,!this.disabled){for(let e=0;e<this.children.length;e++)if(this.children[e].hasAttribute("selected")){this._selection=e;break}this._rationalize()}}});const J=new WeakMap,Y=r(((...e)=>t=>{let s=J.get(t);void 0===s&&(s={values:[]},J.set(t,s));const i=s.values;s.values=e;for(let n=0;n<e.length&&!(void 0!==s.lastRenderedIndex&&n>s.lastRenderedIndex);n++){const r=e[n];if(w(r)||"function"!=typeof r.then){t.setValue(r),s.lastRenderedIndex=n;break}void 0!==s.lastRenderedIndex&&"function"==typeof r.then&&r===i[n]||(s.lastRenderedIndex=void 0,Promise.resolve(r).then((e=>{const i=s.values.indexOf(r);i>-1&&(void 0===s.lastRenderedIndex||i<s.lastRenderedIndex)&&(s.lastRenderedIndex=i,t.setValue(e),t.commit())})))}})),Z=[{units:"w",delta:604800},{units:"d",delta:86400},{units:"h",delta:3600},{units:"m",delta:60},{units:"s",delta:1}],ee=1048576,te=1024*ee,se=[{units:" PB",delta:0x4000000000000},{units:" TB",delta:1099511627776},{units:" GB",delta:te},{units:" MB",delta:ee},{units:" KB",delta:1024},{units:" B",delta:1}];function ie(e){if(e<0&&(e=-e),0===e)return"  0s";let t="";for(let s=0;s<Z.length;s++)if(Z[s].delta<=e){let i=Math.floor(e/Z[s].delta)+Z[s].units;for(;i.length<4;)i=" "+i;t+=i,e%=Z[s].delta}return t}function ne(e){let t=(("number"==typeof e?e:Date.parse(e))-Date.now())/1e3;return t<0&&(t*=-1),oe(t,Z)}function re(e,t=1){return Number.isInteger(t)&&(e*=t),oe(e,se)}function oe(e,t){for(let s=0;s<t.length-1;s++)if(Math.round(e/t[s+1].delta)*t[s+1].delta/t[s].delta>=1)return Math.round(e/t[s].delta)+t[s].units;let s=t.length-1;return Math.round(e/t[s].delta)+t[s].units}function ae(e,t,s=!0){z(e,t),void 0===e[t]&&e.hasAttribute(t)&&(e[t]=e.getAttribute(t),s&&e.removeAttribute(t))}class le{constructor(e){this._time=new Proxy(e,{get(e,t,s){let i=Reflect.get(e,t,s);if(void 0===i)return i;"string"==typeof i&&(i=new Date(i));const n=i.toString(),r=n.substring(n.indexOf("("));return`${i.toLocaleString()} ${r}`}})}get time(){return this._time}}function ce(e,t){if(void 0!==e){for(const s of t){const t=e[s];"string"==typeof t&&(e[s]=new Date(t))}e.humanized=new le(e)}}var he=s(445);class de{constructor(e,t=null,s={}){const i={...s,accessToken:void 0};if(window.LIVE_DEMO&&(i.insecure=!0),this._token=e,t){const e=(e,s)=>(s.signal=t,fetch(e,s));i.fetchImpl=e}this._client=new he.PrpcClient(i)}get service(){throw new Error("Subclasses must define service")}_call(e,t){const s={authorization:this._token};return this._client.call(this.service,e,t,s)}}class ue extends de{get service(){return"swarming.v2.Bots"}bot(e){return this._call("GetBot",{bot_id:e})}tasks(e,t){const s={sort:4,state:10,bot_id:e,cursor:t,limit:30,include_performance_stats:!0};return this._call("ListBotTasks",s)}terminate(e,t){const s={bot_id:e,reason:t};return this._call("TerminateBot",s)}events(e,t){const s={limit:50,bot_id:e,cursor:t};return this._call("ListBotEvents",s)}delete(e){return this._call("DeleteBot",{bot_id:e})}count(e){return this._call("CountBots",{dimensions:e})}dimensions(e){return this._call("GetBotDimensions",{pool:e})}list(e){return this._call("ListBots",e)}}const pe=e=>H`<li>${e.key}:${e.value}</li>`;function me(e,t){const s=`Unexpected error loading ${t}: ${e.message}`;console.error(s),i(s,5e3)}window.customElements.define("bot-mass-delete",class extends HTMLElement{constructor(){super(),this._count="...",this._readyToDelete=!1,this._started=!1,this._finished=!1,this._progress=0,this._dimensions=void 0}connectedCallback(){ae(this,"authHeader"),ae(this,"dimensions"),this.render()}set dimensions(e){"string"==typeof e&&(e=e.split(",")),e.sort(),this._dimensions=e.map((e=>{const[t,s]=e.split(":");return{key:t,value:s}}))}get dimensions(){return this._dimensions}_deleteAll(){this._started=!0,this.dispatchEvent(new CustomEvent("bots-deleting-started",{bubbles:!0}));const e={dimensions:this.dimensions,limit:200,is_dead:"TRUE"},t=new ue(this.authHeader);let s=[];t.list(e).then((e=>{const i=e=>{if(s=s.concat(e.items||[]),this.render(),e.cursor){const s={cursor:e.cursor,dimensions:this.dimensions,limit:200,is_dead:"TRUE"};t.list(s).then(i).catch((e=>me(e,"bot-mass-delete/list (paging)")))}else{const e=s=>{if(!s.length)return this._finished=!0,this.render(),void this.dispatchEvent(new CustomEvent("bots-deleting-finished",{bubbles:!0}));const i=s.pop();t.delete(i.botId).then((()=>{this._progress++,this.render(),e(s)})).catch((e=>me(e,"bot-mass-delete/delete")))};e(s)}};i(e)})).catch((e=>me(e,"bot-mass-delete/list"))),this.render()}_fetchCount(){if(!this.authHeader)return void console.warn("no authHeader received, try refreshing the page?");const e=new ue(this.authHeader).count(this.dimensions).then((e=>(this._readyToDelete=!0,this.render(),parseInt(e.dead||0)))).catch((e=>me(e,"bot-mass-delete/count")));this._count=H`${Y(e,"...")}`}render(){var e;P(H` <div> You are about to delete all DEAD bots with the following dimensions: <ul> ${(e=this).dimensions.map(pe)} </ul> This is about ${e._count} bots. Once you start the process, the only way to partially stop it is to close this browser window. If that sounds good, click the button below. </div> <button class="delete" ?disabled=${!e._readyToDelete||e._started} @click=${e._deleteAll} tabindex="0" > Delete the bots </button> <div> <div ?hidden=${!e._started}> Progress: ${e._progress} deleted${e._finished?" - DONE.":"."} </div> <div> Note: the bot deletion is being done in browser - closing the window will stop the mass deletion. </div> </div> `,this,{eventContext:this})}show(){this._readyToDelete=!1,this._started=!1,this._finished=!1,this._progress=0,this._fetchCount(),this.render()}});const _e=document.createElement("template");_e.innerHTML="<div class=backdrop></div>",window.customElements.define("dialog-pop-over",class extends HTMLElement{constructor(){super(),this._backdrop=null,this._content=null}connectedCallback(){const e=_e.content.cloneNode(!0);if(this.appendChild(e),this._backdrop=t(".backdrop",this),this._content=t(".content",this),!this._content)throw new Error("You must have an element with class content to show.")}hide(){this._backdrop.classList.remove("opened"),this._content.classList.remove("opened")}show(){const e=window.innerWidth,t=window.innerHeight,s=Math.min(this._content.offsetWidth,e-50),i=Math.min(this._content.offsetHeight,t-50);this._content.style.width=s,this._content.style.left=(e-s)/2,this._content.style.top=(t-i)/2,this._backdrop.classList.add("opened"),this._content.classList.add("opened")}});const fe=document.createElement("template");fe.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',window.customElements.define("arrow-drop-down-icon-sk",class extends HTMLElement{connectedCallback(){let e=fe.content.cloneNode(!0);this.appendChild(e)}});const ge=document.createElement("template");ge.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>',window.customElements.define("arrow-drop-up-icon-sk",class extends HTMLElement{connectedCallback(){let e=ge.content.cloneNode(!0);this.appendChild(e)}}),window.customElements.define("sort-toggle",class extends HTMLElement{constructor(){super()}connectedCallback(){ae(this,"currentKey"),ae(this,"key"),ae(this,"direction"),this.addEventListener("click",(()=>{this.toggle()})),this.render()}get currentKey(){return this._currentKey}set currentKey(e){this._currentKey=e,this.render()}get key(){return this._key}set key(e){this._key=e,this.render()}get direction(){return this._direction}set direction(e){this._direction=e,this.render()}toggle(){this.currentKey===this.key&&"asc"===this.direction?this.direction="desc":this.direction="asc",this.dispatchEvent(new CustomEvent("sort-change",{detail:{direction:this.direction,key:this.key},bubbles:!0}))}render(){var e;P(H` <arrow-drop-down-icon-sk ?hidden=${(e=this).key===e.currentKey&&"asc"===e.direction} > </arrow-drop-down-icon-sk> <arrow-drop-up-icon-sk ?hidden=${e.key===e.currentKey&&"desc"===e.direction} > </arrow-drop-up-icon-sk>`,this,{eventContext:this})}}),window.customElements.define("toast-sk",class extends HTMLElement{constructor(){super(),this._timer=null}connectedCallback(){this.hasAttribute("duration")||(this.duration=5e3),z(this,"duration")}get duration(){return+this.getAttribute("duration")}set duration(e){this.setAttribute("duration",e)}show(){this.setAttribute("shown",""),this.duration>0&&!this._timer&&(this._timer=window.setTimeout((()=>{this._timer=null,this.hide()}),this.duration))}hide(){this.removeAttribute("shown"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)}}),window.customElements.define("error-toast-sk",class extends HTMLElement{connectedCallback(){this.innerHTML="<toast-sk></toast-sk>",this._toast=this.firstElementChild,document.addEventListener("error-sk",this)}disconnectedCallback(){document.removeEventListener("error-sk",this)}handleEvent(e){e.detail.duration&&(this._toast.duration=e.detail.duration),this._toast.textContent=e.detail.message,this._toast.show()}});const ve=document.createElement("template");ve.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"/></svg>',window.customElements.define("bug-report-icon-sk",class extends HTMLElement{connectedCallback(){let e=ve.content.cloneNode(!0);this.appendChild(e)}});const be=document.createElement("template");function ye(e){if(e.ok)return e.json();throw{message:`Bad network response: ${e.statusText}`,resp:e,status:e.status}}be.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',window.customElements.define("menu-icon-sk",class extends HTMLElement{connectedCallback(){let e=be.content.cloneNode(!0);this.appendChild(e)}}),window.customElements.define("spinner-sk",class extends HTMLElement{connectedCallback(){z(this,"active")}get active(){return this.hasAttribute("active")}set active(e){e?this.setAttribute("active",""):this.removeAttribute("active")}}),window.customElements.define("oauth-login",class extends HTMLElement{connectedCallback(){z(this,"testing_offline"),this._auth_header="",this._profile=null,this.testing_offline||this._fetchAuthState().then((e=>{"anonymous:anonymous"!=e.identity&&(this._fireLoginEvent(e),this.render())}),(e=>{console.error(e),i(`Error getting auth state: ${JSON.stringify(e)}`,1e4)})),this.render()}static get observedAttributes(){return["testing_offline"]}get authHeader(){return this._auth_header}get profile(){return this._profile}get testing_offline(){return this.hasAttribute("testing_offline")}set testing_offline(e){e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}_fireLoginEvent(e){this._profile={email:e.email,imageURL:e.picture},this._auth_header=`Bearer ${e.accessToken}`,this.dispatchEvent(new CustomEvent("log-in",{detail:{authHeader:this._auth_header,profile:this._profile},bubbles:!0}))}_logIn(){this.testing_offline?(this._fireLoginEvent({email:"missing@chromium.org",picture:"http://storage.googleapis.com/gd-wagtail-prod-assets/original_images/logo_google_fonts_color_2x_web_64dp.png",accessToken:"12345678910-boomshakalaka"}),this.render()):this._nagivateTo("login")}_logOut(){this.testing_offline?window.location.reload():this._nagivateTo("logout")}_nagivateTo(e){const t=window.location.pathname+window.location.search;window.location=t&&"/"!=t?`/auth/openid/${e}?r=${encodeURIComponent(t)}`:`/auth/openid/${e}`}_fetchAuthState(){return fetch("/auth/openid/state",{mode:"same-origin",credentials:"same-origin",cache:"no-store"}).then(ye)}render(){var e;P((e=this).authHeader?H` <div> <img class="center" id="avatar" src="${e._profile.imageURL}" width="30" height="30" /> <span class="center">${e._profile.email}</span> <span class="center">|</span> <a class="center" @click=${e._logOut} href="#">Sign out</a> </div>`:H` <div> <a @click=${e._logIn} href="#">Sign in</a> </div>`,this,{eventContext:this})}attributeChangedCallback(e,t,s){this.render()}});class we extends de{get service(){return"swarming.v2.Swarming"}permissions(e){return this._call("GetPermissions",e)}details(){return this._call("GetDetails",{})}token(){return this._call("GetToken",{})}}const ke=document.createElement("template");ke.innerHTML="\n<button class=toggle-button>\n  <menu-icon-sk>\n  </menu-icon-sk>\n</button>\n";const Ee=document.createElement("template");Ee.innerHTML="\n<div class=spinner-spacer>\n  <spinner-sk></spinner-sk>\n</div>\n";const Ce="You must log in to see more details",xe=document.createElement("template");function Ae(e,t){if(!Ne[t]||"none"===e||!e)return e;let s=Ne[t][e];if("gpu"===t){const i=e.split("-")[0];s=Ne[t][i]}else if("os"===t&&e.startsWith("Windows")){const i=e.split(".")[0];s=Ne[t][i]}return s?`${s} (${e})`:e}xe.innerHTML='\n<a target=_blank rel=noopener\n   href="https://bugs.chromium.org/p/chromium/issues/entry?components=Infra%3ELUCI%3ETaskDistribution%3EUI&owner=kjlubick@chromium.org&status=Assigned">\n  <bug-report-icon-sk class=fab></bug-report-icon-sk>\n</a>',window.customElements.define("swarming-app",class extends HTMLElement{constructor(){super(),this._busyTaskCount=0,this._spinner=null,this._dynamicEle=null,this._auth_header="",this._profile={},this._serverDetails={serverVersion:Ce,botVersion:"",casViewerServer:""};const e=location.hostname.indexOf(".appspot.com");this._projectId=location.hostname.substring(0,e),this._permissions={}}connectedCallback(){z(this,"testing_offline"),this._addHTML(),this.addEventListener("log-in",(e=>{this._auth_header=e.detail.authHeader,this._profile=e.detail.profile,this._fetch()})),this.render()}static get observedAttributes(){return["testing_offline"]}get busy(){return!!this._busyTaskCount}get permissions(){return this._permissions}get profile(){return this._profile}get serverDetails(){return this._serverDetails}get testing_offline(){return this.hasAttribute("testing_offline")}set testing_offline(e){e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}addBusyTasks(e){this._busyTaskCount+=e,this._spinner&&this._busyTaskCount>0&&(this._spinner.active=!0)}finishedTask(){this._busyTaskCount--,this._busyTaskCount<=0&&(this._busyTaskCount=0,this._spinner&&(this._spinner.active=!1),this.dispatchEvent(new CustomEvent("busy-end",{bubbles:!0})))}_addHTML(){const e=this.querySelector("header"),t=e&&e.querySelector("aside"),s=this.querySelector("footer");if(!(e&&t&&t.classList.contains("hideable")))return;let i=ke.content.cloneNode(!0);e.insertBefore(i,e.firstElementChild),(i=e.firstElementChild).addEventListener("click",(e=>this._toggleMenu(e,t)));const n=Ee.content.cloneNode(!0);e.insertBefore(n,t),this._spinner=e.querySelector("spinner-sk");const r=document.createElement("span");r.classList.add("grow"),e.appendChild(r),this._dynamicEle=document.createElement("div"),this._dynamicEle.classList.add("right"),e.appendChild(this._dynamicEle);const o=document.createElement("error-toast-sk");s.append(o);const a=xe.content.cloneNode(!0);s.append(a)}_toggleMenu(e,t){t.classList.toggle("shown")}_fetch(){if(!this._auth_header)return;this._serverDetails={serverVersion:"<loading>",botVersion:"<loading>"};const e={authHeader:this._auth_header};this.addBusyTasks(1),new we(e.authHeader).details().then((e=>{this._serverDetails=e,this.render(),this.dispatchEvent(new CustomEvent("server-details-loaded",{bubbles:!0})),this.finishedTask()})).catch((e=>{"PERMISSION_DENIED"===e.codeName?(this._serverDetails={serverVersion:"User unauthorized - try logging in with a different account",bot_version:""},this.render()):(console.error(e),i(`Unexpected error loading details: ${e.message}`,5e3)),this.finishedTask()})),this._fetchPermissions(e)}_fetchPermissions(e,t){return this.addBusyTasks(1),new we(e.authHeader,e.signal).permissions(t||{}).then((e=>{this._permissions=e,this.render(),this.dispatchEvent(new CustomEvent("permissions-loaded",{bubbles:!0})),this.finishedTask()})).catch((e=>{403!==e.status&&(console.error(e),i(`Unexpected error loading permissions: ${e.message}`,5e3)),this.finishedTask()}))}render(){this._dynamicEle&&P((e=>H` <div class="server-version"> AppEngine version: ${function(e,t){return t&&t.serverVersion?H`<a href=${"https://console.cloud.google.com/appengine/versions?project=".concat(e,"&serviceId=default&pageState=(%22versionsTable%22:(%22f%22:%22%255B%257B_22k_22_3A_22Version_22_2C_22t_22_3A10_2C_22v_22_3A_22_5C_22",t.serverVersion,"_5C_22_22_2C_22s_22_3Atrue_2C_22i_22_3A_22id_22%257D%255D%22))")} > ${t.serverVersion}</a >`:Ce}(e._projectId,e._serverDetails)} Git version:${function(e){if(!e||!e.serverVersion)return"";const t=e.serverVersion.split("-");if(t.length>=3)return console.error(`Invalid Git version. version=${e.serverVersion}`),"";const s=2==t.length?t[1]:t[0];return H`<a href=https://chromium.googlesource.com/infra/luci/luci-py/+/${s}>${s}</a>`}(e._serverDetails)} </div> <oauth-login ?testing_offline=${e.testing_offline}> </oauth-login>`)(this),this._dynamicEle)}attributeChangedCallback(e,t,s){this.render()}});const Ne={device:{"iPad4,1":"iPad Air","iPad5,1":"iPad mini 4","iPad6,3":"iPad Pro [9.7 in]","iPhone7,2":"iPhone 6","iPhone9,1":"iPhone 7"},device_type:{angler:"Nexus 6p",athene:"Moto G4",blueline:"Pixel 3",bullhead:"Nexus 5X",crosshatch:"Pixel 3 XL",darcy:"NVIDIA Shield [2017]",dragon:"Pixel C",flame:"Pixel 4",flo:"Nexus 7 [2013]",flounder:"Nexus 9",foster:"NVIDIA Shield [2015]",fugu:"Nexus Player",gce_x86:"Android on GCE",goyawifi:"Galaxy Tab 3",grouper:"Nexus 7 [2012]",hammerhead:"Nexus 5",herolte:"Galaxy S7 [Global]",heroqlteatt:"Galaxy S7 [AT&T]","iPad4,1":"iPad Air","iPad5,1":"iPad mini 4","iPad6,3":"iPad Pro [9.7 in]","iPhone7,2":"iPhone 6","iPhone9,1":"iPhone 7","iPhone10,1":"iPhone 8",j5xnlte:"Galaxy J5",m0:"Galaxy S3",mako:"Nexus 4",manta:"Nexus 10",marlin:"Pixel XL",mdarcy:"NVIDIA Shield [2019]",oriole:"Pixel 6",sailfish:"Pixel",sargo:"Pixel 3a",shamu:"Nexus 6",sprout:"Android One",starlte:"Galaxy S9",taimen:"Pixel 2 XL","TECNO-KB8":"TECNO Spark 3 Pro",walleye:"Pixel 2",zerofltetmo:"Galaxy S6"},gpu:{1002:"AMD","1002:6613":"AMD Radeon R7 240","1002:6646":"AMD Radeon R9 M280X","1002:6779":"AMD Radeon HD 6450/7450/8450","1002:67ef":"AMD Radeon Pro 560X","1002:679e":"AMD Radeon HD 7800","1002:6821":"AMD Radeon HD 8870M","1002:683d":"AMD Radeon HD 7770/8760","1002:7340":"AMD Radeon RX 5500 XT","1002:9830":"AMD Radeon HD 8400","1002:9874":"AMD Carrizo","1a03":"ASPEED","1a03:2000":"ASPEED Graphics Family","102b":"Matrox","102b:0522":"Matrox MGA G200e","102b:0532":"Matrox MGA G200eW","102b:0534":"Matrox G200eR2","10de":"NVIDIA","10de:08a4":"NVIDIA GeForce 320M","10de:08aa":"NVIDIA GeForce 320M","10de:0a65":"NVIDIA GeForce 210","10de:0fe9":"NVIDIA GeForce GT 750M Mac Edition","10de:0ffa":"NVIDIA Quadro K600","10de:104a":"NVIDIA GeForce GT 610","10de:11c0":"NVIDIA GeForce GTX 660","10de:1244":"NVIDIA GeForce GTX 550 Ti","10de:1401":"NVIDIA GeForce GTX 960","10de:1ba1":"NVIDIA GeForce GTX 1070","10de:1cb3":"NVIDIA Quadro P400","10de:2184":"NVIDIA GeForce GTX 1660",8086:"Intel","8086:0046":"Intel Ironlake HD Graphics","8086:0102":"Intel Sandy Bridge HD Graphics 2000","8086:0116":"Intel Sandy Bridge HD Graphics 3000","8086:0166":"Intel Ivy Bridge HD Graphics 4000","8086:0412":"Intel Haswell HD Graphics 4600","8086:041a":"Intel Haswell HD Graphics","8086:0a16":"Intel Haswell HD Graphics 4400","8086:0a26":"Intel Haswell HD Graphics 5000","8086:0a2e":"Intel Haswell Iris Graphics 5100","8086:0d26":"Intel Haswell Iris Pro Graphics 5200","8086:0f31":"Intel Bay Trail HD Graphics","8086:1616":"Intel Broadwell HD Graphics 5500","8086:161e":"Intel Broadwell HD Graphics 5300","8086:1626":"Intel Broadwell HD Graphics 6000","8086:162b":"Intel Broadwell Iris Graphics 6100","8086:1912":"Intel Skylake HD Graphics 530","8086:191e":"Intel Skylake HD Graphics 515","8086:1926":"Intel Skylake Iris 540/550","8086:193b":"Intel Skylake Iris Pro 580","8086:22b1":"Intel Braswell HD Graphics","8086:3e92":"Intel Coffee Lake S UHD Graphics 630","8086:3e9b":"Intel Coffee Lake H UHD Graphics 630","8086:3ea5":"Intel Coffee Lake Iris Plus Graphics 655","8086:5912":"Intel Kaby Lake HD Graphics 630","8086:591e":"Intel Kaby Lake HD Graphics 615","8086:5926":"Intel Kaby Lake Iris Plus Graphics 640","8086:9bc5":"Intel Comet Lake S UHD Graphics 630",qcom:"Qualcomm","qcom:043a":"Qualcomm Adreno 690"},os:{"Ubuntu-14.04":"Ubuntu 14.04 Trusty Tahr","Ubuntu-16.04":"Ubuntu 16.04 Xenial Xerus","Ubuntu-18.04":"Ubuntu 18.04 Bionic Beaver","Ubuntu-20.04":"Ubuntu 20.04 Focal Fossa","Ubuntu-22.04":"Ubuntu 22.04 Jammy Jellyfish","Windows-10-10240":"Windows 10 version 1507","Windows-10-10586":"Windows 10 version 1511","Windows-10-14393":"Windows 10 version 1607","Windows-10-15063":"Windows 10 version 1703","Windows-10-16299":"Windows 10 version 1709","Windows-10-17134":"Windows 10 version 1803","Windows-10-17763":"Windows 10 version 1809","Windows-10-18362":"Windows 10 version 1903","Windows-10-18363":"Windows 10 version 1909","Windows-Server-14393":"Windows Server 2016","Windows-Server-17134":"Windows Server version 1803","Windows-Server-17763":"Windows Server 2019 or version 1809","Windows-Server-18362":"Windows Server version 1903","Windows-Server-18363":"Windows Server version 1909"}},Te="--";function Ie(e){if(!e)return{};const t=[];let s=0;for(const i in e)e.hasOwnProperty(i)&&(t.push(i+": "+e[i]),s+=+e[i]);return{average:s=(s/=t.length)?s.toFixed(1):"unknown",zones:t.join(" | ")||"unknown"}}function $e(e,t,s){return s=s||"UNKNOWN",Le(e,t)||Me(e,t)||[s]}function Se(e,t,s){if(!t)return console.warn("falsey bot passed into column"),"";const i=Ze[e];if(i)return i(t,s);let n=Te;return-1!==Be.indexOf(e)&&(n="none"),function(e,t){if(t)return e.join(" | ");let s="";for(let t=0;t<e.length;t++)e[t]&&e[t].length>s.length&&(s=e[t]);return s}($e(t,e,n).map((t=>Ae(t,e))),s._verbose)}const De={id:function(e,t){return e.botId===t},status:function(e,t){return"quarantined"===t?e.quarantined:"maintenance"===t?!!e.maintenanceMsg:"dead"===t?e.isDead:!e.isDead},task:function(e,t){return"idle"===t?!e.taskId:!!e.taskId}};function Le(e,t){if(!e||!e.dimensions||!t)return null;for(let s=0;s<e.dimensions.length;s++)if(e.dimensions[s].key===t)return e.dimensions[s].value;return null}function Me(e,t){if(!e||!e.state||!e.state[t])return null;const s=e.state[t];return Array.isArray(s)?s:[s]}const Pe=["All","Alive","Busy","Idle","Dead","Quarantined","Maintenance"];function He(){return Pe.map((e=>({label:e,key:""})))}function Oe(e,t,s){const i={},n=[];for(const t of e){const e=t.split(":",1)[0],s=t.substring(e.length+1);"status"===e?"alive"===s?i.is_dead="FALSE":"quarantined"===s?i.quarantined="TRUE":"maintenance"===s?i.in_maintenance="TRUE":"dead"===s&&(i.is_dead="TRUE"):"task"===e?"busy"===s?i.is_busy="TRUE":"idle"===s&&(i.is_busy="FALSE"):n.push({key:e,value:s})}return i.dimensions=n,i.limit=t,s&&(i.cursor=s),i}const Ue=["firstSeenTs","lastSeenTs","leaseExpirationTs"];function Ve(e,t){return e[0].value=parseInt(t.count||0),e[1].value=parseInt(t.count||0)-parseInt(t.dead||0),e[2].value=parseInt(t.busy||0),e[3].value=parseInt(t.count||0)-parseInt(t.busy||0),e[4].value=parseInt(t.dead||0),e[5].value=parseInt(t.quarantined||0),e[6].value=parseInt(t.maintenance||0),e}const Be=["device_os","device_type","gpu"],Ge=((Re=["id","task"])||(Re=[]),function(e,t){let s=Re.indexOf(e);-1===s&&(s=Re.length+1);let i=Re.indexOf(t);return-1===i&&(i=Re.length+1),s===i?e.localeCompare(t):s-i});var Re;const Ke={cores:!0,cpu:!0,gpu:!0,"host-cpu":!0,machineType:!0,os:!0,python:!0,xcode_version:!0,zone:!0},We=["quarantined","error","id"],ze=["task","externalIp","lastSeen","firstSeen","version","disk_space","uptime","running_time","status","internal_ip","battery_level","battery_voltage","battery_temperature","battery_status","battery_health","bot_temperature","device_temperature","serial_number"],Fe={id:"Bot Id",task:"Current Task",externalIp:"External IP",firstSeen:"First Seen",lastSeen:"Last Seen",version:"Client Code Version",android_devices:"Android Devices",battery_health:"Battery Health",battery_level:"Battery Level (%)",battery_status:"Battery Status",battery_temperature:"Battery Temp (°C)",battery_voltage:"Battery Voltage (mV)",bot_temperature:"Bot Temp (°C)",cores:"CPU Core Count",cpu:"CPU type",device:"Non-android Device",device_os:"Device OS",device_temperature:"Device Temp (°C)",device_type:"Device Type",disk_space:"Free Space (MB)",gpu:"GPU type",internal_ip:"Internal or Local IP",os:"OS",pool:"Pool",running_time:"Swarming Uptime",serial_number:"Device Serial Number",status:"Status",uptime:"Bot Uptime",xcode_version:"XCode Version"},qe={1:"Unknown",2:"Good",3:"Overheated",4:"Dead",5:"Over Voltage",6:"Unspecified Failure",7:"Too Cold"},je={1:"Unknown",2:"Charging",3:"Discharging",4:"Not Charging",5:"Full"};function Xe(e){return e.isDead?4:e.quarantined?3:e.maintenanceMsg?2:1}const Qe=["id"],Je={disk_space:(e,t,s)=>e*V()(t.disks[0].mb,s.disks[0].mb),id:(e,t,s)=>e*V()(t.botId,s.botId),firstSeen:(e,t,s)=>e*V()(t.firstSeenTs,s.firstSeenTs),lastSeen:(e,t,s)=>e*V()(t.lastSeenTs,s.lastSeenTs),status:(e,t,s)=>{const i=Xe(t),n=Xe(s);return i!==n?e*(i-n):t.isDead||t.quarantined||t.maintenanceMsg?e*(t.lastSeenTs-s.lastSeenTs):0},running_time:(e,t,s)=>e*V()(Me(t,"running_time"),Me(s,"running_time")),uptime:(e,t,s)=>e*V()(Me(t,"uptime"),Me(s,"uptime"))};function Ye(e){return(t,s)=>{const i=t.state.devices;return i&&i.length?i.map(e).join(" | "):"N/A - no devices"}}const Ze={version:(e,t)=>{const s=e.version||"UNKNOWN";return t._verbose?s:s.substring(0,10)},externalIp:(e,t)=>e.externalIp||Te,firstSeen:(e,t)=>e.humanized.time.firstSeenTs,id:(e,t)=>H`<a target="_blank" rel="noopener" href=${function(e){return`/bot?id=${e}`}(e.botId)} >${e.botId}</a >`,lastSeen:(e,t)=>t._verbose?function(e){let t=e.toString(),s=t.substring(t.indexOf("("));return e.toLocaleString()+" "+s}(e.lastSeenTs):function(e){return e?ne(e.getTime()):"eons"}(e.lastSeenTs)+" ago",status:(e,t)=>{if(e.isDead)return`Dead. Last seen ${ne(e.lastSeenTs)} ago`;if(e.quarantined){let t=Me(e,"quarantined");t&&(t=t[0]),t&&"true"!==t&&!0!==t||(t=$e(e,"error")[0]),"UNKNOWN"===t&&(t=Le(e,"quarantined")||"UNKNOWN");const s=[];return function(e){return e.state.devices||[]}(e).forEach((function(e){s.push(e.state)})),s.length&&(t+=` devices: [${s.join(", ")}]`),`Quarantined: ${t}`}return e.maintenanceMsg?`Maintenance: ${e.maintenanceMsg}`:"Alive"},task:(e,t)=>{if(!e.taskId)return"idle";let s=e.taskId,i=e.taskName;return e.isDead&&(s="[died on task]",i=`Bot ${e.botId} was last seen running task ${e.taskId} (${e.taskName})`),H`<a target="_blank" rel="noopener" title=${i} href=${function(e,t){if(e)return`/task?id=${e=e.substring(0,e.length-1)+"0"}`}(e.taskId)} >${s}</a >`},android_devices:(e,t)=>{const s=$e(e,"android_devices","0");return t._verbose?s.join(" | ")+" devices available":Math.max(...s)+" devices available"},battery_health:Ye((e=>{const t=e.battery&&e.battery.health||"UNKNOWN";return`${qe[t]||""} (${t})`})),battery_level:Ye((e=>e.battery&&e.battery.level||"UNKNOWN")),battery_status:Ye((e=>{const t=e.battery&&e.battery.status||"UNKNOWN";return`${je[t]||""} (${t})`})),battery_temperature:Ye((e=>e.battery&&e.battery.temperature/10||"UNKNOWN")),battery_voltage:Ye((e=>e.battery&&e.battery.voltage||"UNKNOWN")),bot_temperature:(e,t)=>t._verbose?e.state.temp.zones||"UNKNOWN":e.state.temp.average||"UNKNOWN",device_temperature:(e,t)=>{const s=e.state.devices;return s&&s.length?s.map((e=>t._verbose?e.temp.zones||UNKNOWN:e.temp.average||UNKNOWN)).join(" | "):"N/A - no devices"},disk_space:(e,t)=>{const s=[];for(const t of e.disks){const e=re(t.mb,ee);s.push(`${t.id} ${e} (${t.mb})`)}return t._verbose?s.join(" | "):s[0]},internal_ip:(e,t)=>$e(e,"ip",Te)[0],running_time:(e,t)=>{const s=Me(e,"running_time");return s?ie(s):"UNKNOWN"},serial_number:Ye((e=>e.serial||"UNKNOWN")),uptime:(e,t)=>{const s=Me(e,"uptime");return s?ie(s):"UNKNOWN"}};function et(e,t){return`${e}:${t}`}function tt(e,t){if(!t)return!0;if(!e)return!1;t=t.trim().toLocaleLowerCase(),e=e.toLocaleLowerCase();const s=t.split(" ");for(const t of s)if(-1!==e.indexOf(t))return!0;return!1}const st=document.createElement("template");st.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"/></svg>',window.customElements.define("expand-less-icon-sk",class extends HTMLElement{connectedCallback(){let e=st.content.cloneNode(!0);this.appendChild(e)}});const it=document.createElement("template");function nt(e){return e?H`<expand-less-icon-sk></expand-less-icon-sk>`:H`<expand-more-icon-sk></expand-more-icon-sk>`}it.innerHTML='<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width=24 height=24 viewBox="0 0 24 24"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"/></svg>',window.customElements.define("expand-more-icon-sk",class extends HTMLElement{connectedCallback(){let e=it.content.cloneNode(!0);this.appendChild(e)}});class rt extends de{get service(){return"swarming.v2.Tasks"}cancel(e,t){return this._call("CancelTask",{task_id:e,kill_running:t})}stdout(e,t,s){return this._call("GetStdout",{task_id:e,offset:t,length:s})}request(e){return this._call("GetRequest",{task_id:e})}result(e,t){return this._call("GetResult",{task_id:e,include_performance_stats:t})}new(e){return this._call("NewTask",e)}count(e){return this._call("CountTasks",e)}list(e){return e.state||(e={...e,state:"QUERY_ALL"}),this._call("ListTasks",e)}massCancel(e){return this._call("CancelTasks",e)}}class ot extends HTMLElement{constructor(e){super(),this._template=e,this._app=null,this._auth_header="",this._profile=null,this._notAuthorized=!1}connectedCallback(){z(this,"testing_offline"),this._authHeaderEvent=e=>{this._auth_header=e.detail.authHeader},this.addEventListener("log-in",this._authHeaderEvent)}disconnectedCallback(){this.removeEventListener("log-in",this._authHeaderEvent)}static get observedAttributes(){return["testing_offline"]}get app(){return this._app}get authHeader(){return this._auth_header}get loggedInAndAuthorized(){return!!this._auth_header&&!this._notAuthorized}get permissions(){return this._app&&this._app.permissions||{}}get profile(){return this._app&&this._app.profile||{}}get serverDetails(){return this._app&&this._app.serverDetails||{}}get testing_offline(){return this.hasAttribute("testing_offline")}set testing_offline(e){e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}prpcError(e,t,s){"PERMISSION_DENIED"!==e.codeName||s?"AbortError"!==e.name&&(console.error(e),i(`Unexpected error loading ${t}: ${e.message}`,5e3)):(this._message="User unauthorized - try logging in with a different account",this._notAuthorized=!0,this.render()),this._app.finishedTask()}fetchError(e,t,s){403!==e.status||s?"AbortError"!==e.name&&(console.error(e),i(`Unexpected error loading ${t}: ${e.message}`,5e3)):(this._message="User unauthorized - try logging in with a different account",this._notAuthorized=!0,this.render()),this._app.finishedTask()}render(){P(this._template(this),this,{eventContext:this}),this._app||(this._app=this.firstElementChild,P(this._template(this),this,{eventContext:this}))}attributeChangedCallback(e,t,s){this.render()}_createTasksService(){return new rt(this.authHeader,this._fetchController.signal)}_createBotService(){return new ue(this.authHeader,this._fetchController.signal)}}const at=e=>H`  <select-sk class="selector keys" @scroll=${e._scrollCheck} @selection-changed=${e._primaryKeyChanged} > ${e._filteredPrimaryArr.map((t=>((e,t)=>H` <div class="item" ?selected=${t._primaryKey===e}> <span class="key">${e}</span> </div>`)(t,e)))} </select-sk>  <select-sk class="selector values" disabled> ${(e=>{if(!e._primaryKey)return"";let t=e._primaryMap[e._primaryKey];return t?(t=function(e,t,s){const i=(s=s.trim()).indexOf(":");return-1!==i&&(s=s.substring(i+1)),!s||tt(t,s)?e:e.filter((e=>!!tt(e=Ae(e,t),s)))}(t,e._primaryKey,e._filterQuery),function(e){return Ke[e]}(e._primaryKey)?t.sort(V()):t.sort(),t.map((t=>H` <div class="item"> <span class="value">${Ae(t,e._primaryKey)}</span> <span class="flex"></span> <add-circle-icon-sk ?hidden=${e._filters.indexOf(et(e._primaryKey,t))>=0} @click=${()=>e._addFilter(et(e._primaryKey,t))} > </add-circle-icon-sk> </div>`))):H` <div class="information_only"> Hmm... no preloaded values. Maybe try typing your filter like ${e._primaryKey}:foo-bar in the above box and hitting enter. </div>`})(e)} </select-sk>`,lt=(e,t)=>H` <tr> <td> <a href=${O(e._makeSummaryURL(t,!0))}>${t.label}</a>: </td> <td>${t.value}</td> </tr>`,ct=e=>H` <div class=header> <div class=filter_box ?hidden=${!e.loggedInAndAuthorized}> <search-icon-sk></search-icon-sk> <input id=filter_search class=search type=text placeholder='Search filters or supply a filter and press enter' @input=${e._refilterPrimaryKeys} @keyup=${e._filterSearch}> </input>  <div></div> ${at(e)} ${(e=>H` <div class="options"> <div class="verbose"> <checkbox-sk ?checked=${e._verbose} @click=${e._toggleVerbose}> </checkbox-sk> <span>Verbose Entries</span> </div> <a href=${e._matchingTasksLink()}>View Matching Tasks</a> <button id="delete_all" ?disabled=${!e.permissions.deleteBots} @click=${e._promptMassDelete} > DELETE ALL DEAD BOTS </button> </div>`)(e)} </div> ${(e=>H` <div class="summary" ?hidden=${!e._showFleetCounts}> <div class="fleet_header hider title" @click=${e._toggleFleetsCount}> <span>Fleet</span> ${nt(e._showFleetCounts)} </div> <table id="fleet_counts"> ${e._fleetCounts.map((t=>((e,t)=>H` <tr> <td> <a href=${O(e._makeSummaryURL(t,!1))}>${t.label}</a >: </td> <td>${t.value}</td> </tr>`)(e,t)))} </table> </div> <div class="summary"> <div class="fleet_header shower title" ?hidden=${e._showFleetCounts} @click=${e._toggleFleetsCount} > <span>Fleet</span> ${nt(e._showFleetCounts)} </div> <div class="title">Selected</div> <table id="query_counts"> ${lt(e,{label:"Displayed",value:e._bots.length})} ${e._queryCounts.map((t=>lt(e,t)))} </table> </div>`)(e)} </div> </div> <div class=chip_container> ${e._filters.map((t=>((e,t)=>H` <span class="chip"> <span>${function(e){const t=e.indexOf(":");if(t<0)return e;const s=e.substring(0,t);return`${s}:${Ae(e.substring(t+1),s.split("-tag")[0])}`}(e)}</span> <cancel-icon-sk @click=${()=>t._removeFilter(e)}></cancel-icon-sk> </span>`)(t,e)))} </div>`,ht=e=>H` <swarming-app id=swapp ?testing_offline=${e.testing_offline}> <header> <div class=title>Swarming Bot List</div> <aside class=hideable> <a href=/>Home</a> <a href=/tasklist>Task List</a> <a href=/bot>Bot Page</a> <a href=/task>Task Page</a> </aside> </header>  <main @click=${t=>e._showColSelector&&e._toggleColSelector(t)}> <h2 class=message ?hidden=${e.loggedInAndAuthorized}>${e._message}</h2> ${e.loggedInAndAuthorized?ct(e):""} <table class=bot-table ?hidden=${!e.loggedInAndAuthorized}> <thead> <tr> ${(e=>H`  <th class="col_options" @click=${e._toggleColSelector}> <span class="show_widget"> <more-vert-icon-sk tabindex="0" @keypress=${e._toggleColSelector} ></more-vert-icon-sk> </span> <span>Bot Id</span> <sort-toggle @click=${e=>e.stopPropagation()&&e.preventDefault()} key="id" .currentKey=${e._sort} .direction=${e._dir} > </sort-toggle> ${(e=>e._showColSelector?H`  <div class=col_selector @click=${e=>e.stopPropagation()}> <input id=column_search class=search type=text placeholder='Search columns to show' @input=${e._refilterPossibleColumns}  @keyup=${e._columnSearch}> </input> ${e._filteredPossibleColumns.map((t=>((e,t)=>H` <div class="item"> <span class="key">${e}</span> <span class="flex"></span> <checkbox-sk ?checked=${t._cols.indexOf(e)>=0} ?disabled=${Qe.indexOf(e)>=0} @click=${s=>t._toggleCol(s,e)} @keypress=${s=>t._toggleCol(s,e)} > </checkbox-sk> </div>`)(t,e)))} </div>`:"")(e)} </th>`)(e)}  ${e._cols.slice(1).map((t=>((e,t)=>H` <th> ${function(e){return Fe[e]||e}(e)} <sort-toggle .key=${e} .currentKey=${t._sort} .direction=${t._dir}> </sort-toggle> </th>`)(t,e)))} </tr> </thead> <tbody>${e._sortBots().map((t=>((e,t)=>H` <tr class="bot-row ${t._botClass(e)}"> ${t._cols.map((s=>((e,t,s)=>H` <td>${Se(e,t,s)}</td>`)(s,e,t)))} </tr>`)(t,e)))}</tbody> </table> <button ?hidden=${!e.loggedInAndAuthorized||!!e._filters.length||e._showAll} @click=${e._forceShowAll}> Show All </button> </main> <footer></footer> <dialog-pop-over> <div class='delete content'> <bot-mass-delete .authHeader=${e.authHeader} .dimensions=${function(e){const t=Object.keys(De);return e.filter((e=>{for(const s of t)if(e.startsWith(s+":"))return!1;return!0}))}(e._filters)}> </bot-mass-delete> <button class=goback tabindex=0 @click=${e._closePopup} ?disabled=${e._startedDeleting&&!e._finishedDeleting}> ${e._startedDeleting?"DISMISS":"GO BACK - DON'T DELETE ANYTHING"} </button> </div> </dialog-pop-over> </swarming-app>`;window.customElements.define("bot-list",class extends ot{constructor(){super(ht),this._bots=[],this._cols=[],this._dir="",this._filters=[],this._limit=0,this._primaryKey="",this._showAll=!1,this._showFleetCounts=!1,this._sort="",this._verbose=!1,this._fleetCounts=He(),this._queryCounts=He(),this._stateChanged=W((()=>({c:this._cols,d:this._dir,e:this._showFleetCounts,f:this._filters,k:this._primaryKey,s:this._sort,show_all:this._showAll,v:this._verbose})),(e=>{(function(e){const t={last_seen:"lastSeen",first_seen:"firstSeen",external_ip:"externalIp"};e.c=(e.c||[]).map((e=>t[e]||e));const s=t[e.s];s&&(e.s=s)})(e),this._cols=e.c,e.c.length||(this._cols=["id","task","os","status"]),this._dir=e.d||"asc",this._filters=e.f||[],this._primaryKey=e.k,this._sort=e.s||"id",this._verbose=e.v,this._showFleetCounts=e.e,this._limit=100,this._showAll=e.show_all,this._fetch(),this.render()})),this._primaryArr=[],this._filteredPrimaryArr=[],this._possibleColumns=[],this._filteredPossibleColumns=[],this._primaryMap={},this._message="You must sign in to see anything useful.",this._showColSelector=!1,this._columnQuery="",this._filterQuery="",this._fetchController=null,this._ignoreScrolls=0}connectedCallback(){super.connectedCallback(),this._loginEvent=e=>{this._fetch(),this.render()},this.addEventListener("log-in",this._loginEvent),this._sortEvent=e=>{this._sort=e.detail.key,this._dir=e.detail.direction,this._stateChanged(),this.render()},this.addEventListener("sort-change",this._sortEvent),this._startedMassDeletingEvent=e=>{this._startedDeleting=!0,this._finishedDeleting=!1,this.render()},this.addEventListener("bots-deleting-started",this._startedMassDeletingEvent),this._finishedMassDeletingEvent=e=>{this._startedDeleting=!0,this._finishedDeleting=!0,this.render()},this.addEventListener("bots-deleting-finished",this._finishedMassDeletingEvent)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("log-in",this._loginEvent),this.removeEventListener("sort-change",this._sortEvent),this.removeEventListener("bots-deleting-started",this._startedMassDeletingEvent),this.removeEventListener("bots-deleting-finished",this._finishedMassDeletingEvent)}_addFilter(e){this._filters.indexOf(e)>=0||(this._filters.push(e),this._stateChanged(),this._bots=function(e,t){const s=[];for(const t of e){const e=t.indexOf(":"),i=t.slice(0,e),n=t.slice(e+1);s.push([i,n])}return t.filter((e=>{let t=!0;for(const i of s){const[s,n]=i;De[s]?t&=De[s](e,n):t&=-1!==$e(e,s,[]).indexOf(n)}return t}))}(this._filters,this._bots),this._fetch(),this.render())}_botClass(e){let t="";return e.isDead&&(t+="dead "),e.quarantined&&(t+="quarantined "),e.maintenanceMsg&&(t+="maintenance "),e.version!==this.serverDetails.botVersion&&(t+="old_version"),t}_closePopup(e){t("dialog-pop-over",this).hide(),this._startedDeleting=!1,this._finishedDeleting=!1}_columnSearch(e){if("Enter"!==e.key)return;const s=t("#column_search",this),n=s.value.trim();if(-1!==this._possibleColumns.indexOf(n)){if(s.value="",this._columnQuery="",-1!==this._cols.indexOf(n))return this._refilterPossibleColumns(),void i(`Column "${n}" already displayed.`,5e3);this._cols.push(n),this._stateChanged(),this._refilterPossibleColumns()}else i(`Column "${n}" is not valid.`,5e3)}_fetch(){if(!this.loggedInAndAuthorized||!this._limit)return;this._fetchController&&this._fetchController.abort(),this._fetchController=new AbortController;const e={authHeader:this.authHeader,signal:this._fetchController.signal};this.app._fetchPermissions(e,{tags:this._filters}).then((()=>{this._primaryMap={pool:this.permissions.listBots||[]},this._primaryArr=["pool"],this._filteredPrimaryArr=this._primaryArr.slice(),this._refilterPossibleColumns()}));const t=this._createBotService();this.app.addBusyTasks(1);let s=Oe(this._filters,this._limit);t.list(s).then((e=>{this._bots=[];const i=e=>{this._bots=this._bots.concat(function(e){if(!e)return[];for(const t of e){t.state=t.state&&JSON.parse(t.state)||{},ce(t,Ue);const e=t.state.disks||{},s=Object.keys(e);if(s.length){t.disks=[];for(let i=0;i<s.length;i++)t.disks.push({id:s[i],mb:e[s[i]].free_mb});t.disks.sort((function(e,t){return t.mb-e.mb}))}else t.disks=[{id:"unknown",mb:0}];t.state.temp=Ie(t.state.temp);const i=[],n=t&&t.state&&t.state.devices||{};for(const e in n)if(n.hasOwnProperty(e)){const s=n[e];s.serial=e,s.okay="available"===s.state;const r=Le(t,"device_type")||["UNKNOWN"];s.device_type=r[0],s.temp=Ie(s.temp),i.push(s)}i.sort(((e,t)=>e.serial<t.serial?-1:e.serial>t.serial?1:0)),t.state.devices=i}return e}(e.items)),this.render(),(this._filters.length||this._showAll)&&e.cursor?(this._limit=200,s=Oe(this._filters,this._limit,e.cursor),t.list(s).then(i).catch((e=>this.prpcError(e,"bots/list (paging)",!0)))):this.app.finishedTask()};i(e)})).catch((e=>this.prpcError(e,"bots/list",!0))),this.app.addBusyTasks(1),t.count(s.dimensions).then((e=>{this._queryCounts=Ve(this._queryCounts,e),this.render(),this.app.finishedTask()})).catch((e=>this.prpcError(e,"bots/count (query)",!0))),this._fleetCounts._queried||(this._fleetCounts._queried=!0,this.app.addBusyTasks(1),t.count([]).then((e=>{this._fleetCounts=Ve(this._fleetCounts,e),this.render(),this.app.finishedTask()})).catch((e=>this.prpcError(e,"bots/count (fleet)",!0)))),this.app.addBusyTasks(1);const i=this._filters.filter((e=>e.startsWith("pool:"))).map((e=>e.replace("pool:","")))[0]||"";new ue(this.authHeader).dimensions(i).then((e=>{this._primaryMap=function(e){const t={};(e=e||[]).forEach((function(e){We.indexOf(e.key)>=0||(t[e.key]=e.value)})),t.android_devices&&t.android_devices.push("0");for(const e of Be)t[e]&&-1===t[e].indexOf("none")&&t[e].push("none");return t.id=null,t.task=["busy","idle"],t.status=["alive","dead","quarantined","maintenance"],t}(e.botsDimensions),this._possibleColumns=function(e){if(!e)return[];const t=[];return e.forEach((function(e){-1===We.indexOf(e.key)&&t.push(e.key)})),t.push("id"),Array.prototype.push.apply(t,ze),t.sort(),t}(e.botsDimensions),this._filteredPossibleColumns=this._possibleColumns.slice(),this._primaryArr=Object.keys(this._primaryMap),this._primaryArr.sort(),this._filteredPrimaryArr=this._primaryArr.slice(),this._refilterPossibleColumns(),this.app.finishedTask()})).catch((e=>this.prpcError(e,"bots/dimensions",!0)))}_filterSearch(e){if("Enter"!==e.key)return;const s=t("#filter_search",this),n=s.value.trim();if(-1!==n.indexOf(":")){if(s.value="",this._filterQuery="",this._primaryKey="",-1!==this._filters.indexOf(n))return this._refilterPrimaryKeys(),void i(`Filter "${n}" is already active`,5e3);this._addFilter(n),this._refilterPrimaryKeys()}else i('Invalid filter.  Should be like "foo:bar"',5e3)}_forceShowAll(){this._showAll=!0,this._stateChanged(),this._fetch()}_makeSummaryURL(e,t){if(!e||"Displayed"===e.label||"All"===e.label)return;const s=e.label.toLowerCase();let i="status:"+s;"busy"!==s&&"idle"!==s||(i="task:"+s);const n=new URL(window.location.href);if(t){if(-1!==n.searchParams.getAll("f").indexOf(i))return;return n.searchParams.append("f",i),n.href}const r={s:[this._sort],c:this._cols,v:[this._verbose],f:[i],e:[!0]};return n.pathname+"?"+B(r)}_matchingTasksLink(){const e=["name","state","createdTs"],t=this._filters.filter((e=>!De[e.split(":")[0]]));for(const s of t){const t=s.split(":",1)[0];-1===e.indexOf(t)&&e.push(t)}return function(e=[],t=[],s,i){const n=[];for(const t of e)if(t.key&&t.value)if(Array.isArray(t.value))for(const e of t.value)n.push(t.key+":"+e);else n.push(t.key+":"+t.value);else n.push(t);const r={f:n,c:t};return s&&(r.st=[s.getTime()]),i&&(r.et=[i.getTime()],r.n=[!1]),"/tasklist?"+B(r)}(t,e)}_primaryKeyChanged(e){this._primaryKey=this._filteredPrimaryArr[e.detail.selection],this._stateChanged(),this.render()}_promptMassDelete(e){t("bot-mass-delete",this).show(),t("dialog-pop-over",this).show(),t("dialog-pop-over button.goback",this).focus()}_refilterPossibleColumns(e){const s=t("#column_search",this);this._columnQuery=s&&s.value||"",this._filteredPossibleColumns=function(e,t){return t?e.filter((e=>tt(e,t))):e}(this._possibleColumns,this._columnQuery),function(e,t){const s={};for(const e of t)s[e]=!0;e.sort(((e,t)=>{const i=s[e],n=s[t];return i&&!n?-1:n&&!i?1:i&&n?Ge(e,t):e.localeCompare(t)}))}(this._filteredPossibleColumns,this._cols),this.render()}_refilterPrimaryKeys(e){this._filterQuery=t("#filter_search",this).value,this._filteredPrimaryArr=function(e,t,s){if(!s)return e;if(-1===(s=s.trim()).indexOf(":"))return e.filter((e=>{if(tt(e,s))return!0;const i=t[e]||[];for(let t of i)if(tt(t=Ae(t,e),s))return!0;return!1}));const i=(s=s.split(":")[0])+"-tag";return e.filter((e=>e===s||e===i))}(this._primaryArr,this._primaryMap,this._filterQuery),this._filterQuery&&this._filteredPrimaryArr.length>0&&-1===this._filteredPrimaryArr.indexOf(this._primaryKey)&&(this._primaryKey=this._filteredPrimaryArr[0],this._stateChanged()),this.render()}_removeFilter(e){const t=this._filters.indexOf(e);-1!==t&&(this._filters.splice(t,1),this._stateChanged(),this._fetch(),this.render())}render(){(function(e){e.sort(Ge)})(this._cols),super.render(),this._scrollToPrimaryKey()}_scrollCheck(){this._ignoreScrolls>0?this._ignoreScrolls--:this._humanScrolledKeys=!0}_scrollToPrimaryKey(){const e=t(".keys.selector",this);if(this._primaryKey&&!this._humanScrolledKeys&&e){const s=t(".item[selected]",e);s&&(this._ignoreScrolls++,e.scrollTo({top:s.offsetTop-160}))}}_sortBots(){return this._bots.sort(((e,t)=>{const s=this._sort;if(!s)return 0;let i=1;"desc"===this._dir&&(i=-1);const n=Je[s];if(n)return n(i,e,t);let r=Se(s,e,this);"none"===r&&(r="zzz");let o=Se(s,t,this);return"none"===o&&(o="zzz"),i*V()(r,o)})),this._bots}_toggleCol(e,t){if(Qe.indexOf(t)>=0)return;e.preventDefault(),e.stopPropagation();const s=this._cols.indexOf(t);s>=0?this._cols.splice(s,1):this._cols.push(t),this._refilterPossibleColumns(),this._stateChanged(),this.render()}_toggleColSelector(e){e.preventDefault(),e.stopPropagation(),this._showColSelector=!this._showColSelector,this._refilterPossibleColumns()}_toggleFleetsCount(e){e.preventDefault(),e.stopPropagation(),this._showFleetCounts=!this._showFleetCounts,this._stateChanged(),this.render()}_toggleVerbose(e){e.preventDefault(),this._verbose=!this._verbose,this._stateChanged(),this.render()}})})()})();