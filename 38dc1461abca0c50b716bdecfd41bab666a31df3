{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a7208222_55d5fcc9",
        "filename": "appengine/swarming/server/task_scheduler.py",
        "patchSetId": 3
      },
      "lineNbr": 317,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-11-29T04:36:56Z",
      "side": 1,
      "message": "better to use lager value like 45?\nhttp://shortn/_A7g8hhVpDF",
      "range": {
        "startLine": 317,
        "startChar": 68,
        "endLine": 317,
        "endChar": 70
      },
      "revId": "38dc1461abca0c50b716bdecfd41bab666a31df3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "599de0ca_9fb83087",
        "filename": "appengine/swarming/server/task_scheduler.py",
        "patchSetId": 3
      },
      "lineNbr": 317,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2021-11-29T05:16:19Z",
      "side": 1,
      "message": "Thank you for the report.\nI was also wondering what is the best deadline period because\nthere are other transactions in the bot poll API.\n\n- task expiration (up to 5 times)\nhttps://source.chromium.org/chromium/infra/infra/+/main:luci/appengine/swarming/server/task_scheduler.py;l\u003d1385;drc\u003d50362364cf72555c24d2eea100a3967a5958b639\n- bot event https://source.chromium.org/chromium/infra/infra/+/main:luci/appengine/swarming/handlers_bot.py;l\u003d698;drc\u003dd30be894fa7ae84415b733ba32152d2e850fa8af\n\nWhen the _reap_task() transaction takes 30sec/45sec, I guess other transactions also take long time.",
      "parentUuid": "a7208222_55d5fcc9",
      "range": {
        "startLine": 317,
        "startChar": 68,
        "endLine": 317,
        "endChar": 70
      },
      "revId": "38dc1461abca0c50b716bdecfd41bab666a31df3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b71e1125_debf8bf1",
        "filename": "appengine/swarming/server/task_scheduler.py",
        "patchSetId": 3
      },
      "lineNbr": 317,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-11-29T05:29:23Z",
      "side": 1,
      "message": "Hmm, then it is better to focus on optimization rather than setting adhoc deadline here?",
      "parentUuid": "599de0ca_9fb83087",
      "range": {
        "startLine": 317,
        "startChar": 68,
        "endLine": 317,
        "endChar": 70
      },
      "revId": "38dc1461abca0c50b716bdecfd41bab666a31df3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "504f863c_e22e8652",
        "filename": "appengine/swarming/server/task_scheduler.py",
        "patchSetId": 3
      },
      "lineNbr": 317,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2021-11-29T05:29:52Z",
      "side": 1,
      "message": "Looking at a sample request that took 41sec http://shortn/_I6m8cOVnqU,\nIt seems taking long time for iterating potential tasks, but not for transaction.\n\nLooking at a report for chromium http://shortn/_nJ0KhFj4Tb\n99.9th is around 15 sec.\n\nSo should be fine to set 30 sec deadline(?)",
      "parentUuid": "599de0ca_9fb83087",
      "range": {
        "startLine": 317,
        "startChar": 68,
        "endLine": 317,
        "endChar": 70
      },
      "revId": "38dc1461abca0c50b716bdecfd41bab666a31df3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0b7685c_3c75b0a0",
        "filename": "appengine/swarming/server/task_scheduler.py",
        "patchSetId": 3
      },
      "lineNbr": 317,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2021-11-29T05:34:03Z",
      "side": 1,
      "message": "\u003e Hmm, then it is better to focus on optimization rather than setting adhoc deadline here?\n\nThe AppEngine deadline exceeded error for poll API itself is not problem. \nIt is problematic when it happens *during _bot_reap() transaction*.\nThis is for safety to avoid those situation when Datastore is busy. and I don\u0027t think this is adhoc.",
      "parentUuid": "504f863c_e22e8652",
      "range": {
        "startLine": 317,
        "startChar": 68,
        "endLine": 317,
        "endChar": 70
      },
      "revId": "38dc1461abca0c50b716bdecfd41bab666a31df3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f264e4c_5f532894",
        "filename": "appengine/swarming/server/task_scheduler.py",
        "patchSetId": 3
      },
      "lineNbr": 317,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-11-29T05:43:00Z",
      "side": 1,
      "message": "I see.",
      "parentUuid": "a0b7685c_3c75b0a0",
      "range": {
        "startLine": 317,
        "startChar": 68,
        "endLine": 317,
        "endChar": 70
      },
      "revId": "38dc1461abca0c50b716bdecfd41bab666a31df3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}