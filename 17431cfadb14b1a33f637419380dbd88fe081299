{
  "comments": [
    {
      "key": {
        "uuid": "21faa5d6_53aeb117",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-01-10T15:30:39Z",
      "side": 1,
      "message": "Please use instead TaskDimensionsSet as your data source.\nref: https://cs.chromium.org/chromium/infra/luci/appengine/swarming/server/task_queues.py?l\u003d190\n\nIt already contains the list of dimension sets used. This is registered at the time of the TaskRequest creation.\nref: https://cs.chromium.org/chromium/infra/luci/appengine/swarming/server/task_scheduler.py?l\u003d633\n\nStale entries are evicted after 6 hours by a cron job that calls into tidy_stale().\nref: https://cs.chromium.org/chromium/infra/luci/appengine/swarming/server/task_queues.py?l\u003d755\n\nThe only gotcha is tasks that specify the \u0027id\u0027 key. Since they can by definition only be run by exactly a single bot, they are stored as BotTaskDimensions.\nref: https://cs.chromium.org/chromium/infra/luci/appengine/swarming/server/task_queues.py?l\u003d107",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "195b051b_cfc640c6",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1228540
      },
      "writtenOn": "2018-01-18T05:28:09Z",
      "side": 1,
      "message": "I\u0027ve spent some time looking at TaskDimensionsSet, and can\u0027t figure out:\ncan I actually get the number of tasks with a given dimension set from it?\n\nIt looks like task_queues.assert_task has an early exit with no write if the\ndimensions set already exists with exactly the same dimensions, so I don\u0027t think so?",
      "parentUuid": "21faa5d6_53aeb117",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2c376c0_68d05586",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-01-20T01:08:00Z",
      "side": 1,
      "message": "Ignore what I wrote above. :(",
      "parentUuid": "195b051b_cfc640c6",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "abcb6f87_f7dfe4dd",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1228540
      },
      "writtenOn": "2018-01-29T02:31:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f2c376c0_68d05586",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1939326b_364ad788",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-01-20T01:08:00Z",
      "side": 1,
      "message": "In practice this is not a real DB fetch, it is fetched from memcache, because the entity is immutable. So it is not as bad as it may sound like. So I\u0027d just remove the comment.",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d522f74_c67d2559",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1228540
      },
      "writtenOn": "2018-01-29T02:31:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1939326b_364ad788",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f91670c0_f0aa4a38",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-01-20T01:08:00Z",
      "side": 1,
      "message": "Since you want the project, it\u0027s a tag, you need to look at it too.",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0665682d_e1bcbe54",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 1228540
      },
      "writtenOn": "2018-01-29T02:31:34Z",
      "side": 1,
      "message": "Ack.\n\n(I\u0027m not going to grab it now, as per below)",
      "parentUuid": "f91670c0_f0aa4a38",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee640bf2_0686d3c6",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-01-20T01:08:00Z",
      "side": 1,
      "message": "What problem would you expect?",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57f389e6_f015c498",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 1228540
      },
      "writtenOn": "2018-01-29T02:31:34Z",
      "side": 1,
      "message": "bot_management.filter_dimensions raises a ValueError if any of the filter_dimensions don\u0027t match the expected format. Since it gets constructed above, that\u0027s only going to happen if:\n1. the format for dimension tags changes\n2. the key/values in dimensions accidentally gets some whitespace committed to the DB\n\nThese are both unlikely cases, but I\u0027d rather not have the whole cron job fail on a single bad task.",
      "parentUuid": "ee640bf2_0686d3c6",
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "06beaa3a_bea8a736",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-01-20T01:08:00Z",
      "side": 1,
      "message": "There\u0027s no dimension \u0027project\u0027 but there\u0027s generally a tag, which are on the request. Maybe you meant pool?",
      "range": {
        "startLine": 161,
        "startChar": 40,
        "endLine": 161,
        "endChar": 47
      },
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc3691ee_814238c8",
        "filename": "appengine/swarming/handlers_backend.py",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1228540
      },
      "writtenOn": "2018-01-29T02:31:34Z",
      "side": 1,
      "message": "Ahhh. I forgot the distinction between dimensions and tags.\n\nI\u0027d like to have that data eventually, but I\u0027d rather keep this CL small, and just having \"pool\" should still be a pretty good win, so I\u0027ll just drop \"project\" here.",
      "parentUuid": "06beaa3a_bea8a736",
      "range": {
        "startLine": 161,
        "startChar": 40,
        "endLine": 161,
        "endChar": 47
      },
      "revId": "17431cfadb14b1a33f637419380dbd88fe081299",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}