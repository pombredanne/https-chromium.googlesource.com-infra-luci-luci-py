{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "78dec408_c7e92533",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 8
      },
      "lineNbr": 319,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-09-30T22:45:08Z",
      "side": 1,
      "message": "Could you include link to investgation comment for the reference here and in log?\nhttps://crbug.com/1252454#c12\nhttps://crbug.com/1247362#c19",
      "range": {
        "startLine": 319,
        "startChar": 12,
        "endLine": 319,
        "endChar": 15
      },
      "revId": "7b878d31c93e4f3d2c288cef58775634db589828",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26013597_6c1ccdf9",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 8
      },
      "lineNbr": 321,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2021-09-30T23:03:23Z",
      "side": 1,
      "message": "I think there is still a chance that the bot gets deleted after this check before the transaction.\nSo my proposal is to check the existence check in the transaction \"run()\".",
      "range": {
        "startLine": 321,
        "startChar": 0,
        "endLine": 321,
        "endChar": 60
      },
      "revId": "7b878d31c93e4f3d2c288cef58775634db589828",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfeb28e9_43927dd7",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 8
      },
      "lineNbr": 322,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-09-30T22:45:08Z",
      "side": 1,
      "message": "could you also check should_be_dead too?",
      "revId": "7b878d31c93e4f3d2c288cef58775634db589828",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0bed1c8a_0bb6db99",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 8
      },
      "lineNbr": 322,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2021-09-30T22:57:12Z",
      "side": 1,
      "message": "i\u0027m already checking it below, could you clarify where you think i should check it?",
      "parentUuid": "cfeb28e9_43927dd7",
      "revId": "7b878d31c93e4f3d2c288cef58775634db589828",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f602d157_0d593061",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 8
      },
      "lineNbr": 322,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2021-09-30T23:05:56Z",
      "side": 1,
      "message": "Oh i think you\u0027re saying\n`if not b or not b.should_be_dead:`\n\nI\u0027ll update it",
      "parentUuid": "0bed1c8a_0bb6db99",
      "revId": "7b878d31c93e4f3d2c288cef58775634db589828",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1c3c4fd_362844ab",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 8
      },
      "lineNbr": 322,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-09-30T23:08:40Z",
      "side": 1,
      "message": "Ah, yeah. But what I\u0027d like to see is like\n\n```\nreal_b \u003d b.get.get(...)\nif not real_b:\n  logging.warning(...)\n  continue\n\nif not real_b.should_be_dead:\n  logging.warning(...)\n  continue\n\nif real_b.is_alive !\u003d b.is_alive:\n  logging.warning(...)\n  \nif real_b.is_dead !\u003d b.is_dead:\n  logging.warning(...)\n\nif not real_b.is_alive and real_b.is_dead:\n  continue\n\nyield real_b\n```",
      "parentUuid": "0bed1c8a_0bb6db99",
      "revId": "7b878d31c93e4f3d2c288cef58775634db589828",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}